@import url("/assets/vendor/css/qi_fonts.css?v=20260118");

:root {
    --mi-font-display: "Oswald", "Source Sans 3", sans-serif;
    --mi-font-body: "Source Sans 3", sans-serif;
    --mi-font-mono: "IBM Plex Mono", "Courier New", monospace;
    --mi-blue-rgb: 0, 147, 208;
    --mi-navy-rgb: 0, 45, 98;
    --qi-navy: #002D62;
    --qi-gold: #A29061;
    --qi-blue: #0093D0;
    --qi-blue-deep: var(--qi-navy);
    --qi-blue-soft: #3F6189;
    --qi-accent: #0093D0;
    --qi-text: #0B1B2D;
    --qi-text-soft: #42566A;
    --qi-bg: #FFFFFF;
    --qi-bg-muted: #F2F4F7;
    --mi-sage: #6B7C8E;
    --mi-sand: #F4F0E6;
    --mi-border: #D5DEE6;
    --mi-border-strong: #BFC9D4;
    --mi-shadow: rgba(0, 0, 0, 0);
    --mi-page-bg: linear-gradient(160deg, #F7FAFC 0%, #F1F6FA 55%, #E9F3FA 100%);
    --mi-header-bg: linear-gradient(120deg, #0093D0 0%, #0077AB 45%, #002D62 100%);
    --mi-menu-bg: #FFFFFF;
    --mi-menu-border: var(--mi-border);
    --mi-menu-text: var(--qi-blue-deep);
    --mi-menu-text-strong: var(--qi-text);
    --mi-menu-text-muted: var(--qi-text-soft);
    --mi-header-text: var(--mi-menu-text-strong);
    --mi-header-subtext: var(--mi-menu-text-muted);
    --mi-header-meta: var(--mi-menu-text-strong);
    --mi-header-pill-bg: var(--mi-menu-bg);
    --mi-header-pill-border: var(--mi-menu-border);
    --mi-header-pill-text: var(--mi-menu-text-strong);
    --mi-text-contrast: var(--qi-text);
    --mi-text-contrast-muted: var(--qi-text-soft);
    --mi-menu-active-bg: #E6F2FA;
    --mi-card-bg: #FFFFFF;
    --mi-card-border: var(--mi-border);
    --mi-card-shade: linear-gradient(180deg, rgba(0, 0, 0, 0.04), rgba(0, 0, 0, 0));
    --mi-card-shadow: none;
    --mi-stage-bg: #FFFFFF;
    --mi-stage-border: var(--mi-border-strong);
    --plyr-color-main: var(--qi-blue);
    --mi-preview-bg: linear-gradient(135deg, #FFFFFF 0%, #F4F8FB 100%);
    --mi-preview-border: #C9D6E2;
    --mi-preview-inner-border: #B8C8D8;
    --mi-console-header-height: 56px;
    --mi-console-menu-height: 36px;
    --mi-console-status-height: 80px;
    --mi-console-carousel-height: 96px;
    --mi-console-agenda-height: 44px;
    --mi-console-grid-gap: 12px;
    --mi-console-grid-padding-x: 14px;
    --mi-console-grid-padding-y: 10px;
    --mi-console-stage-padding-x: 12px;
    --mi-console-stage-padding-y: 10px;
    --mi-title-shadow: 0 1px 0 rgba(0, 45, 98, 0.3),
        0 2px 0 rgba(0, 45, 98, 0.22),
        0 3px 0 rgba(0, 45, 98, 0.18),
        0 8px 18px rgba(0, 45, 98, 0.22);
    --mi-slide-item-bg: #FFFFFF;
    --mi-slide-item-border: var(--mi-border);
    --mi-slide-item-active-bg: #F0F7FB;
    --mi-slide-item-active-border: var(--qi-blue);
    --mi-slide-item-active-shadow: none;
    --mi-carousel-label: var(--mi-text-contrast);
    --mi-carousel-number: var(--mi-menu-text-strong);
    --mi-carousel-title: var(--mi-menu-text-strong);
    --mi-carousel-text-shadow: 0 1px 2px rgba(0, 0, 0, 0.18);
    --mi-carousel-control-size: 32px;
    --mi-console-carousel-row-gap: 4px;
    --mi-console-carousel-padding-top: 10px;
    --mi-console-carousel-padding-bottom: 12px;
    --mi-console-carousel-track-min: 48px;
    --mi-console-carousel-toolbar-min: calc(var(--mi-carousel-control-size) + 10px);
    --mi-console-carousel-min-height: calc(var(--mi-console-carousel-padding-top) + var(--mi-console-carousel-padding-bottom) + var(--mi-console-carousel-row-gap) + var(--mi-console-carousel-toolbar-min) + var(--mi-console-carousel-track-min));
    --mi-console-control-text: var(--mi-menu-text-strong);
    --mi-console-control-muted: var(--mi-menu-text-muted);
    --mi-console-control-accent: var(--qi-blue-soft);
    --mi-console-agenda-bg: linear-gradient(180deg, rgba(12, 25, 41, 0.88) 0%, rgba(8, 18, 30, 0.88) 100%);
    --mi-console-agenda-border: rgba(255, 255, 255, 0.06);
    --mi-console-chip-bg: rgba(255, 255, 255, 0.08);
    --mi-console-chip-border: rgba(255, 255, 255, 0.14);
    --mi-console-chip-text: var(--mi-console-control-text);
    --mi-console-chip-active-bg: rgba(0, 147, 208, 0.22);
    --mi-console-chip-active-border: var(--mi-slide-item-active-border);
    --mi-console-chip-active-text: #cfefff;
    --mi-console-popover-bg: rgba(8, 18, 30, 0.98);
    --mi-console-popover-border: rgba(0, 147, 208, 0.4);
    --mi-console-popover-text: #E7F5FF;
    --mi-console-popover-muted: rgba(207, 223, 239, 0.75);
    --plyr-color-main: var(--qi-blue);
}

.hmi-warning {
    position: fixed;
    top: 12px;
    left: 50%;
    transform: translateX(-50%);
    background: #FFF3CD;
    color: #6B4A35;
    border: 1px solid #FFECB5;
    border-radius: 999px;
    padding: 6px 12px;
    font-size: 11px;
    z-index: 10000;
    max-width: min(90vw, 520px);
    text-align: center;
}

body[data-theme="light"] {
    --qi-blue: #0A2342;
    --qi-blue-soft: #385277;
    --qi-accent: #2D7DF6;
    --qi-text: #0B1B2D;
    --qi-text-soft: #2F3B4C;
    --qi-bg: #FFFFFF;
    --qi-bg-muted: #F5F8FF;
    --mi-sage: #4F6B60;
    --mi-sand: #EEF3FB;
    --mi-shadow: rgba(14, 40, 64, 0.12);
    --mi-page-bg: radial-gradient(circle at top left, #E8F1FF 0%, #F5F8FF 45%, #EEF3FB 100%);
    --mi-header-bg: linear-gradient(120deg, #0A2342 0%, #14335F 60%, #1D4F8F 100%);
    --mi-menu-bg: #FFFFFF;
    --mi-menu-border: #E2E8F0;
    --mi-menu-text: #0A2342;
    --mi-menu-active-bg: #EEF3FB;
    --mi-card-bg: #FFFFFF;
    --mi-card-border: #E2E8F0;
    --mi-card-shadow: 0 10px 22px rgba(15, 30, 45, 0.08);
    --mi-stage-bg: #FFFFFF;
    --mi-stage-border: #E2E8F0;
    --mi-preview-bg: linear-gradient(135deg, #FFFFFF 0%, #F2F5F9 100%);
    --mi-preview-border: #D5DCE7;
    --mi-preview-inner-border: #C7CED8;
    --mi-slide-item-bg: #FFFFFF;
    --mi-slide-item-border: #D5DCE7;
    --mi-slide-item-active-bg: #E9F2FF;
    --mi-slide-item-active-border: #2D7DF6;
    --mi-slide-item-active-shadow: 0 0 0 3px rgba(45, 125, 246, 0.2);
    --mi-border: var(--mi-card-border);
    --mi-border-strong: var(--mi-stage-border);
}

body[data-theme="dark"] {
    --qi-blue: #7DD3FC;
    --qi-blue-soft: #38BDF8;
    --qi-accent: #22D3EE;
    --qi-text: #F1F5F9;
    --qi-text-soft: #D1DAE8;
    --qi-bg: #0F172A;
    --qi-bg-muted: #111827;
    --mi-sage: #1F2937;
    --mi-sand: #0B1220;
    --mi-shadow: rgba(0, 0, 0, 0.5);
    --mi-page-bg: radial-gradient(circle at top left, #0B1220 0%, #0F172A 60%, #111827 100%);
    --mi-header-bg: linear-gradient(120deg, #0B1220 0%, #111827 60%, #1E293B 100%);
    --mi-menu-bg: #0F172A;
    --mi-menu-border: #1F2937;
    --mi-menu-text: #E2E8F0;
    --mi-menu-active-bg: #1E293B;
    --mi-card-bg: #0F172A;
    --mi-card-border: #1F2937;
    --mi-card-shadow: 0 12px 26px rgba(0, 0, 0, 0.45);
    --mi-stage-bg: #0F172A;
    --mi-stage-border: #1F2937;
    --mi-preview-bg: linear-gradient(135deg, #111827 0%, #0F172A 100%);
    --mi-preview-border: #1F2937;
    --mi-preview-inner-border: #334155;
    --mi-title-shadow: 0 1px 0 rgba(0, 0, 0, 0.6),
        0 2px 0 rgba(0, 0, 0, 0.5),
        0 3px 0 rgba(0, 0, 0, 0.4),
        0 8px 18px rgba(0, 0, 0, 0.55);
    --mi-slide-item-bg: #0F172A;
    --mi-slide-item-border: #1F2937;
    --mi-slide-item-active-bg: #111827;
    --mi-slide-item-active-border: #22D3EE;
    --mi-slide-item-active-shadow: 0 0 0 3px rgba(34, 211, 238, 0.25);
    --mi-border: var(--mi-card-border);
    --mi-border-strong: var(--mi-stage-border);
}

body[data-theme="dark"],
body[data-theme="lcars"],
body[data-theme="command_blue"],
body[data-theme="ops_amber"],
body[data-theme="medical_teal"],
body[data-theme="engineering_bronze"],
body[data-theme="science_cyan"],
body[data-theme="nebula_rain"],
body[data-theme="ops_cascade"],
body[data-theme="science_matrix"],
body[data-theme="command_aurora"],
body[data-theme="lcars_flux"],
body[data-theme="night_ops"] {
    --mi-card-shade: linear-gradient(180deg, rgba(255, 255, 255, 0.04), rgba(255, 255, 255, 0));
}

body[data-theme="blues_green"] {
    --qi-blue: #0F4C5C;
    --qi-blue-soft: #177E89;
    --qi-accent: #2BBF95;
    --qi-text: #0B1B2D;
    --qi-text-soft: #2E4A4F;
    --qi-bg: #F7FBFA;
    --qi-bg-muted: #E8F3F0;
    --mi-sage: #4F8A79;
    --mi-sand: #E2F2ED;
    --mi-shadow: rgba(12, 60, 70, 0.18);
    --mi-page-bg: radial-gradient(circle at top left, #E2F6F2 0%, #F7FBFA 55%, #E3F0EE 100%);
    --mi-header-bg: linear-gradient(120deg, #0F4C5C 0%, #145F6F 60%, #1C7C7C 100%);
    --mi-menu-bg: #F7FBFA;
    --mi-menu-border: #D5E7E2;
    --mi-menu-text: #0F4C5C;
    --mi-menu-active-bg: #E2F2ED;
    --mi-card-bg: #FFFFFF;
    --mi-card-border: #D5E7E2;
    --mi-card-shadow: 0 10px 20px rgba(12, 60, 70, 0.1);
    --mi-stage-bg: #FFFFFF;
    --mi-stage-border: #D5E7E2;
    --mi-preview-bg: linear-gradient(135deg, #FFFFFF 0%, #ECF6F3 100%);
    --mi-preview-border: #CFE2DD;
    --mi-preview-inner-border: #B7D3CB;
    --mi-slide-item-bg: #FFFFFF;
    --mi-slide-item-border: #CFE2DD;
    --mi-slide-item-active-bg: #E1F3EE;
    --mi-slide-item-active-border: #2BBF95;
    --mi-slide-item-active-shadow: 0 0 0 3px rgba(43, 191, 149, 0.2);
    --mi-border: var(--mi-card-border);
    --mi-border-strong: var(--mi-stage-border);
}

body[data-theme="quality_irrigation"] {
    --qi-blue: #0093D0;
    --qi-blue-soft: #3F6189;
    --qi-accent: #0093D0;
    --qi-text: #0B1B2D;
    --qi-text-soft: #31465A;
    --qi-bg: #FFFFFF;
    --qi-bg-muted: #F2F4F7;
    --mi-sand: #F4F0E6;
    --mi-page-bg: linear-gradient(160deg, #F7FAFC 0%, #F1F6FA 55%, #E9F3FA 100%);
    --mi-header-bg: linear-gradient(120deg, #005882 0%, #006FA3 45%, #002D62 100%);
    --mi-menu-active-bg: #E6F2FA;
    --mi-slide-item-active-bg: #F0F7FB;
    --mi-border: var(--mi-card-border);
    --mi-border-strong: var(--mi-stage-border);
}

body[data-theme="futuristic"] {
    --qi-blue: #30C5FF;
    --qi-blue-soft: #8FE7FF;
    --qi-accent: #22F5D0;
    --qi-text: #E5F7FF;
    --qi-text-soft: #9CC7D6;
    --qi-bg: #0B1020;
    --qi-bg-muted: #11162B;
    --mi-sage: #1B2A3C;
    --mi-sand: #0F1428;
    --mi-shadow: rgba(0, 0, 0, 0.55);
    --mi-page-bg: radial-gradient(circle at top left, #0B1020 0%, #0E162A 60%, #111B33 100%);
    --mi-header-bg: linear-gradient(120deg, #0B1020 0%, #111C33 60%, #132541 100%);
    --mi-menu-bg: #0F1428;
    --mi-menu-border: #1C2A44;
    --mi-menu-text: #E5F7FF;
    --mi-menu-active-bg: #17203A;
    --mi-card-bg: #0F1428;
    --mi-card-border: #1C2A44;
    --mi-card-shadow: 0 12px 26px rgba(0, 0, 0, 0.55);
    --mi-stage-bg: #0F1428;
    --mi-stage-border: #1C2A44;
    --mi-preview-bg: linear-gradient(135deg, #0F1428 0%, #0B1020 100%);
    --mi-preview-border: #1C2A44;
    --mi-preview-inner-border: #2A3B5A;
    --mi-slide-item-bg: #0F1428;
    --mi-slide-item-border: #1C2A44;
    --mi-slide-item-active-bg: #14213B;
    --mi-slide-item-active-border: #22F5D0;
    --mi-slide-item-active-shadow: 0 0 0 3px rgba(34, 245, 208, 0.25);
    --mi-border: var(--mi-card-border);
    --mi-border-strong: var(--mi-stage-border);
}

body[data-theme="soil_field"] {
    --qi-blue: #5B3A29;
    --qi-blue-soft: #7A5A43;
    --qi-accent: #6B8E23;
    --qi-text: #2B1F16;
    --qi-text-soft: #5C4A3A;
    --qi-bg: #FBF7F0;
    --qi-bg-muted: #F2E7D8;
    --mi-sage: #6B7B4E;
    --mi-sand: #EADDCB;
    --mi-shadow: rgba(73, 52, 36, 0.18);
    --mi-page-bg: radial-gradient(circle at top left, #F6EFE4 0%, #FBF7F0 55%, #F0E5D8 100%);
    --mi-header-bg: linear-gradient(120deg, #5B3A29 0%, #6B4A35 60%, #7A5A43 100%);
    --mi-menu-bg: #FBF7F0;
    --mi-menu-border: #E6D6C2;
    --mi-menu-text: #5B3A29;
    --mi-menu-active-bg: #EFE2D2;
    --mi-card-bg: #FFFFFF;
    --mi-card-border: #E6D6C2;
    --mi-card-shadow: 0 10px 20px rgba(73, 52, 36, 0.12);
    --mi-stage-bg: #FFFFFF;
    --mi-stage-border: #E6D6C2;
    --mi-preview-bg: linear-gradient(135deg, #FFFFFF 0%, #F6EFE4 100%);
    --mi-preview-border: #DECBB4;
    --mi-preview-inner-border: #CDB79F;
    --mi-slide-item-bg: #FFFFFF;
    --mi-slide-item-border: #DECBB4;
    --mi-slide-item-active-bg: #F1E5D6;
    --mi-slide-item-active-border: #6B8E23;
    --mi-slide-item-active-shadow: 0 0 0 3px rgba(107, 142, 35, 0.2);
    --mi-border: var(--mi-card-border);
    --mi-border-strong: var(--mi-stage-border);
}

body[data-theme="retro"] {
    --qi-blue: #FF6F91;
    --qi-blue-soft: #3AB795;
    --qi-accent: #FFD700;
    --qi-text: #1A2B3C;
    --qi-text-soft: #4D4D4D;
    --qi-bg: #FDF6EC;
    --qi-bg-muted: #FFFFFF;
    --mi-sage: #F5EBDD;
    --mi-sand: #FFF5EA;
    --mi-page-bg: radial-gradient(circle at top left, #FFF8F3 0%, #FDF6EC 65%, #F8EBDA 100%);
    --mi-header-bg: linear-gradient(120deg, #8C1E3C 0%, #A02846 45%, #145A46 100%);
    --mi-menu-bg: #FFFFFF;
    --mi-menu-border: #FFE2A8;
    --mi-menu-text: #1A2B3C;
    --mi-menu-active-bg: #FFF0C2;
    --mi-card-bg: #FFFFFF;
    --mi-card-border: #FFE2A8;
    --mi-card-shadow: 0 12px 20px rgba(0, 0, 0, 0.08);
    --mi-stage-bg: #FFFFFF;
    --mi-stage-border: #FFD700;
    --mi-preview-bg: linear-gradient(135deg, #FFFFFF 0%, #FFEFE5 100%);
    --mi-preview-border: #FFD700;
    --mi-preview-inner-border: #FFE2A8;
    --mi-slide-item-bg: #FFFFFF;
    --mi-slide-item-border: #FFDDD0;
    --mi-slide-item-active-bg: #FFFAF7;
    --mi-slide-item-active-border: #FF6F91;
    --mi-border: var(--mi-card-border);
    --mi-border-strong: var(--mi-stage-border);
}

body[data-theme="lcars"] {
    --lcars-accent: #E77F2F;
    --lcars-accent-2: #F4C542;
    --lcars-accent-3: #64B5FF;
    --lcars-text: #F8FAFC;
    --lcars-muted: #CBD5E1;
    --lcars-bg: #0C0D18;
    --qi-blue: var(--lcars-accent-3);
    --qi-blue-soft: #8bbcf5;
    --qi-accent: var(--lcars-accent);
    --qi-text: var(--lcars-text);
    --qi-text-soft: var(--lcars-muted);
    --qi-bg: var(--lcars-bg);
    --qi-bg-muted: #13162a;
    --mi-sage: #223056;
    --mi-sand: #141728;
    --mi-shadow: rgba(0, 0, 0, 0.55);
    --mi-page-bg: radial-gradient(circle at 12% 8%, rgba(228, 146, 69, 0.16), transparent 32%), linear-gradient(180deg, #0c0d18 0%, #11162a 60%, #0c0d18 100%);
    --mi-header-bg: linear-gradient(120deg, #1b1f32 0%, #222945 50%, #0c0d18 100%);
    --mi-menu-bg: #1b1f32;
    --mi-menu-border: #2b314a;
    --mi-menu-text: var(--lcars-text);
    --mi-menu-active-bg: rgba(231, 127, 47, 0.18);
    --mi-card-bg: #11162a;
    --mi-card-border: #2b314a;
    --mi-card-shadow: 0 12px 30px rgba(0, 0, 0, 0.55);
    --mi-stage-bg: #0f1224;
    --mi-stage-border: #2b314a;
    --mi-preview-bg: radial-gradient(circle at 18% 10%, rgba(231, 127, 47, 0.12), transparent 32%), linear-gradient(135deg, #0f1224 0%, #11162a 100%);
    --mi-preview-border: #2b314a;
    --mi-preview-inner-border: #394269;
    --mi-title-shadow: 0 1px 0 rgba(0, 0, 0, 0.65), 0 3px 12px rgba(0, 0, 0, 0.5);
    --mi-slide-item-bg: #161b30;
    --mi-slide-item-border: #2b314a;
    --mi-slide-item-active-bg: rgba(244, 197, 66, 0.18);
    --mi-slide-item-active-border: var(--lcars-accent-2);
    --mi-slide-item-active-shadow: 0 0 0 3px rgba(231, 127, 47, 0.25);
    --mi-border: var(--mi-card-border);
    --mi-border-strong: var(--mi-stage-border);
}

body[data-theme="command_blue"] {
    --qi-blue: #64b5ff;
    --qi-blue-soft: #9bd6ff;
    --qi-accent: #ffd35f;
    --qi-text: #eaf2ff;
    --qi-text-soft: #c8d9f3;
    --qi-bg: #0f1528;
    --qi-bg-muted: #121b31;
    --mi-sage: #223551;
    --mi-sand: #141a2f;
    --mi-shadow: rgba(0, 0, 0, 0.55);
    --mi-page-bg: radial-gradient(circle at 12% 8%, rgba(100, 181, 255, 0.1), transparent 34%), linear-gradient(180deg, #0f1528 0%, #101b31 60%, #0f1528 100%);
    --mi-header-bg: linear-gradient(120deg, #182139 0%, #1e2b46 50%, #0f1528 100%);
    --mi-menu-bg: #182139;
    --mi-menu-border: #2f3a54;
    --mi-menu-text: var(--qi-text);
    --mi-menu-active-bg: rgba(100, 181, 255, 0.18);
    --mi-card-bg: #10182c;
    --mi-card-border: #2f3a54;
    --mi-card-shadow: 0 12px 30px rgba(0, 0, 0, 0.55);
    --mi-stage-bg: #0f1528;
    --mi-stage-border: #2f3a54;
    --mi-preview-bg: radial-gradient(circle at 18% 10%, rgba(255, 211, 95, 0.12), transparent 32%), linear-gradient(135deg, #0f1528 0%, #101b31 100%);
    --mi-preview-border: #2f3a54;
    --mi-preview-inner-border: #3a4a6a;
    --mi-slide-item-bg: #121b31;
    --mi-slide-item-border: #2f3a54;
    --mi-slide-item-active-bg: rgba(100, 181, 255, 0.15);
    --mi-slide-item-active-border: #ffd35f;
    --mi-slide-item-active-shadow: 0 0 0 3px rgba(100, 181, 255, 0.22);
    --mi-border: var(--mi-card-border);
    --mi-border-strong: var(--mi-stage-border);
}

body[data-theme="ops_amber"] {
    --qi-blue: #f29f3f;
    --qi-blue-soft: #ffd38f;
    --qi-accent: #e77f2f;
    --qi-text: #ffffff;
    --qi-text-soft: #f8efe4;
    --qi-bg: #13161d;
    --qi-bg-muted: #1b1f29;
    --mi-sage: #262b3a;
    --mi-sand: #161a22;
    --mi-shadow: rgba(0, 0, 0, 0.55);
    --mi-page-bg: radial-gradient(circle at 10% 6%, rgba(242, 159, 63, 0.14), transparent 36%), linear-gradient(180deg, #16181f 0%, #1c1f29 60%, #16181f 100%);
    --mi-header-bg: linear-gradient(120deg, #1f222c 0%, #262c3a 55%, #16181f 100%);
    --mi-menu-bg: #1f222c;
    --mi-menu-border: #353a48;
    --mi-menu-text: var(--qi-text);
    --mi-menu-active-bg: rgba(242, 159, 63, 0.18);
    --mi-card-bg: #161a22;
    --mi-card-border: #353a48;
    --mi-card-shadow: 0 12px 30px rgba(0, 0, 0, 0.55);
    --mi-stage-bg: #16181f;
    --mi-stage-border: #353a48;
    --mi-preview-bg: radial-gradient(circle at 16% 10%, rgba(244, 197, 66, 0.12), transparent 34%), linear-gradient(135deg, #13161d 0%, #1b1f29 100%);
    --mi-preview-border: #353a48;
    --mi-preview-inner-border: #40495c;
    --mi-slide-item-bg: #181c24;
    --mi-slide-item-border: #353a48;
    --mi-slide-item-active-bg: rgba(242, 159, 63, 0.16);
    --mi-slide-item-active-border: #f4c542;
    --mi-slide-item-active-shadow: 0 0 0 3px rgba(231, 127, 47, 0.24);
    --mi-border: var(--mi-card-border);
    --mi-border-strong: var(--mi-stage-border);
}

body[data-theme="medical_teal"] {
    --qi-blue: #66e6ce;
    --qi-blue-soft: #9df4ff;
    --qi-accent: #5de0c5;
    --qi-text: #e8fbff;
    --qi-text-soft: #b8dfe7;
    --qi-bg: #0d1c22;
    --qi-bg-muted: #102631;
    --mi-sage: #1a3a46;
    --mi-sand: #0f1f27;
    --mi-shadow: rgba(0, 0, 0, 0.55);
    --mi-page-bg: radial-gradient(circle at 12% 8%, rgba(102, 230, 206, 0.12), transparent 32%), linear-gradient(180deg, #0d1c22 0%, #11303b 60%, #0d1c22 100%);
    --mi-header-bg: linear-gradient(120deg, #123341 0%, #154253 55%, #0d1c22 100%);
    --mi-menu-bg: #123341;
    --mi-menu-border: #235262;
    --mi-menu-text: var(--qi-text);
    --mi-menu-active-bg: rgba(102, 230, 206, 0.18);
    --mi-card-bg: #0f1f27;
    --mi-card-border: #235262;
    --mi-card-shadow: 0 12px 30px rgba(0, 0, 0, 0.55);
    --mi-stage-bg: #0d1c22;
    --mi-stage-border: #235262;
    --mi-preview-bg: radial-gradient(circle at 18% 10%, rgba(157, 244, 255, 0.14), transparent 34%), linear-gradient(135deg, #0d1c22 0%, #11303b 100%);
    --mi-preview-border: #235262;
    --mi-preview-inner-border: #2b6577;
    --mi-slide-item-bg: #102631;
    --mi-slide-item-border: #235262;
    --mi-slide-item-active-bg: rgba(157, 244, 255, 0.16);
    --mi-slide-item-active-border: #66e6ce;
    --mi-slide-item-active-shadow: 0 0 0 3px rgba(102, 230, 206, 0.22);
    --mi-border: var(--mi-card-border);
    --mi-border-strong: var(--mi-stage-border);
}

body[data-theme="engineering_bronze"] {
    --qi-blue: #d88432;
    --qi-blue-soft: #ffcf73;
    --qi-accent: #e6a65c;
    --qi-text: #fffaf2;
    --qi-text-soft: #f8e9d7;
    --qi-bg: #140d05;
    --qi-bg-muted: #1a1208;
    --mi-sage: #24170a;
    --mi-sand: #160f06;
    --mi-shadow: rgba(0, 0, 0, 0.6);
    --mi-page-bg: radial-gradient(circle at 10% 6%, rgba(216, 132, 50, 0.12), transparent 34%), linear-gradient(180deg, #1a1208 0%, #22170c 60%, #1a1208 100%);
    --mi-header-bg: linear-gradient(120deg, #22170c 0%, #2b1d10 55%, #1a1208 100%);
    --mi-menu-bg: #24180c;
    --mi-menu-border: #3b2a17;
    --mi-menu-text: #ffffff;
    --mi-menu-active-bg: rgba(216, 132, 50, 0.18);
    --mi-card-bg: #22160b;
    --mi-card-border: #3b2a17;
    --mi-card-shadow: 0 12px 30px rgba(0, 0, 0, 0.6);
    --mi-stage-bg: #22160b;
    --mi-stage-border: #3b2a17;
    --mi-preview-bg: radial-gradient(circle at 18% 10%, rgba(255, 207, 115, 0.14), transparent 34%), linear-gradient(135deg, #140d05 0%, #1d1309 100%);
    --mi-preview-border: #3b2a17;
    --mi-preview-inner-border: #4a331c;
    --mi-slide-item-bg: #24180c;
    --mi-slide-item-border: #3b2a17;
    --mi-slide-item-active-bg: rgba(255, 207, 115, 0.14);
    --mi-slide-item-active-border: #d88432;
    --mi-slide-item-active-shadow: 0 0 0 3px rgba(216, 132, 50, 0.24);
    --mi-border: var(--mi-card-border);
    --mi-border-strong: var(--mi-stage-border);
    --mi-title-shadow: 0 1px 0 rgba(0, 0, 0, 0.78),
        0 2px 0 rgba(0, 0, 0, 0.68),
        0 3px 0 rgba(0, 0, 0, 0.58),
        0 10px 22px rgba(0, 0, 0, 0.72);
    --mi-header-band-bg: rgba(27, 18, 8, 0.92);
    --mi-carousel-number: #fff2de;
    --mi-carousel-title: #ffffff;
    --mi-carousel-text-shadow: 0 1px 2px rgba(0, 0, 0, 0.45);
    --mi-header-subtext: #fdf3e4;
    --mi-header-meta: #ffffff;
}

body[data-theme="engineering_bronze"] .header-title {
    font-size: clamp(19px, 2.2vw, 24px);
    font-weight: 700;
    letter-spacing: 0.09em;
}

body[data-theme="engineering_bronze"] .header-subtitle,
body[data-theme="engineering_bronze"] .header-subtitle.header-subtitle-meta {
    font-weight: 700;
}

body[data-theme="engineering_bronze"] .carousel-item-title {
    font-size: 13.5px;
    font-weight: 700;
}

body[data-theme="engineering_bronze"] .panel-title,
body[data-theme="engineering_bronze"] .layout-title,
body[data-theme="engineering_bronze"] .presenter-title,
body[data-theme="engineering_bronze"] .slide-preview-title {
    font-weight: 700;
}

body[data-theme="engineering_bronze"][data-hmi-layout="console"] .header-title {
    font-size: clamp(17px, 2vw, 21px);
    font-weight: 700;
    letter-spacing: 0.09em;
}

body[data-theme="engineering_bronze"][data-hmi-layout="console"] .header-subtitle,
body[data-theme="engineering_bronze"][data-hmi-layout="console"] .header-subtitle.header-subtitle-meta {
    font-weight: 700;
}

body[data-theme="engineering_bronze"][data-hmi-layout="console"] .carousel-item-title {
    font-size: 12px;
    font-weight: 700;
}

body[data-theme="engineering_bronze"][data-hmi-layout="console"] .carousel-item-number,
body[data-theme="engineering_bronze"][data-hmi-layout="console"] .panel-title {
    font-weight: 700;
}

body[data-theme="engineering_bronze"] .console-header::after {
    content: "";
    position: absolute;
    inset: 0;
    background: var(--mi-header-band-bg);
    border-radius: inherit;
    z-index: 0;
}

body[data-theme="engineering_bronze"] .console-header > * {
    position: relative;
    z-index: 1;
}

body[data-theme="science_cyan"] {
    --qi-blue: #3bc4ff;
    --qi-blue-soft: #a2e4ff;
    --qi-accent: #2ad1ff;
    --qi-text: #eaf7ff;
    --qi-text-soft: #c5dff1;
    --qi-bg: #0b1019;
    --qi-bg-muted: #111a26;
    --mi-sage: #1a2a40;
    --mi-sand: #0f1824;
    --mi-shadow: rgba(0, 0, 0, 0.55);
    --mi-page-bg: radial-gradient(circle at 12% 8%, rgba(59, 196, 255, 0.12), transparent 32%), linear-gradient(180deg, #0b1019 0%, #111a26 60%, #0b1019 100%);
    --mi-header-bg: linear-gradient(120deg, #162236 0%, #1c2c44 55%, #0b1019 100%);
    --mi-menu-bg: #162236;
    --mi-menu-border: #2a3c55;
    --mi-menu-text: var(--qi-text);
    --mi-menu-active-bg: rgba(59, 196, 255, 0.18);
    --mi-card-bg: #0f1824;
    --mi-card-border: #2a3c55;
    --mi-card-shadow: 0 12px 30px rgba(0, 0, 0, 0.55);
    --mi-stage-bg: #0b1019;
    --mi-stage-border: #2a3c55;
    --mi-preview-bg: radial-gradient(circle at 18% 10%, rgba(162, 228, 255, 0.14), transparent 34%), linear-gradient(135deg, #0b1019 0%, #111a26 100%);
    --mi-preview-border: #2a3c55;
    --mi-preview-inner-border: #334c68;
    --mi-slide-item-bg: #111a26;
    --mi-slide-item-border: #2a3c55;
    --mi-slide-item-active-bg: rgba(59, 196, 255, 0.16);
    --mi-slide-item-active-border: #3bc4ff;
    --mi-slide-item-active-shadow: 0 0 0 3px rgba(59, 196, 255, 0.22);
    --mi-border: var(--mi-card-border);
    --mi-border-strong: var(--mi-stage-border);
}

@keyframes code-rain {
    from { background-position: 0 0, 0 0; }
    to { background-position: 0 120px, 0 80px; }
}

@keyframes code-rain-slow {
    from { background-position: 0 0, 0 0; }
    to { background-position: 0 180px, 0 110px; }
}

body[data-theme="ops_cascade"],
body[data-theme="science_matrix"],
body[data-theme="command_aurora"],
body[data-theme="lcars_flux"] {
    position: relative;
    background-color: var(--qi-bg);
    background-image:
        radial-gradient(circle at 12% 10%, rgba(255,255,255,0.06), transparent 40%),
        radial-gradient(circle at 82% 18%, rgba(255,255,255,0.04), transparent 42%);
    background-size: cover;
    overflow-x: hidden;
    --mi-overlay-opacity: 0.55;
}

body[data-theme="ops_cascade"]::after,
body[data-theme="science_matrix"]::after,
body[data-theme="command_aurora"]::after,
body[data-theme="lcars_flux"]::after {
    content: "";
    position: fixed;
    inset: 0;
    pointer-events: none;
    z-index: 0;
    background-image:
        linear-gradient(180deg, rgba(255,255,255,0.04), rgba(255,255,255,0.02)),
        linear-gradient(0deg, transparent 45%, rgba(255,255,255,0.08) 60%, transparent 80%);
    background-size: 2px 120px, 3px 180px;
    animation:
        code-rain 14s linear infinite,
        code-rain-slow 22s linear infinite reverse;
    mix-blend-mode: screen;
    opacity: var(--mi-overlay-opacity, 0.55);
}

body[data-theme="nebula_rain"] {
    --qi-blue: #39c4ff;
    --qi-blue-soft: #8dfcff;
    --qi-accent: #8dfcff;
    --qi-text: #ffffff;
    --qi-text-soft: #e7f2ff;
    --qi-bg: #060911;
    --qi-bg-muted: #0c1320;
    --mi-sage: #111a2e;
    --mi-sand: #090f1b;
    --mi-shadow: rgba(0, 0, 0, 0.6);
    --mi-page-bg: linear-gradient(180deg, #060911 0%, #0b1220 55%, #060911 100%);
    --mi-header-bg: linear-gradient(120deg, #0c1320 0%, #111a2e 60%, #060911 100%);
    --mi-menu-bg: #0c1320;
    --mi-menu-border: #1e2942;
    --mi-menu-text: #ffffff;
    --mi-menu-active-bg: rgba(57, 196, 255, 0.16);
    --mi-card-bg: #090f1b;
    --mi-card-border: #1e2942;
    --mi-card-shadow: 0 14px 36px rgba(0, 0, 0, 0.55);
    --mi-stage-bg: #0a0f1a;
    --mi-stage-border: #1e2942;
    --mi-preview-bg: radial-gradient(circle at 18% 10%, rgba(141, 252, 255, 0.12), transparent 32%), linear-gradient(135deg, #060911 0%, #0c1320 100%);
    --mi-preview-border: #1e2942;
    --mi-preview-inner-border: #2a3a55;
    --mi-slide-item-bg: #090f1b;
    --mi-slide-item-border: #1e2942;
    --mi-slide-item-active-bg: rgba(57, 196, 255, 0.16);
    --mi-slide-item-active-border: #39c4ff;
    --mi-slide-item-active-shadow: 0 0 0 3px rgba(57, 196, 255, 0.22);
    --mi-border: var(--mi-card-border);
    --mi-border-strong: var(--mi-stage-border);
    --mi-overlay-opacity: 0.22;
    --mi-title-shadow: 0 1px 0 rgba(0, 0, 0, 0.78),
        0 2px 0 rgba(0, 0, 0, 0.68),
        0 3px 0 rgba(0, 0, 0, 0.58),
        0 10px 22px rgba(0, 0, 0, 0.72);
    --mi-header-band-bg: rgba(6, 9, 17, 0.92);
}

body[data-theme="nebula_rain"] .console-header::after {
    content: "";
    position: absolute;
    inset: 0;
    background: var(--mi-header-band-bg);
    border-radius: inherit;
    z-index: 0;
}

body[data-theme="nebula_rain"] .console-header > * {
    position: relative;
    z-index: 1;
}

body[data-theme="nebula_rain"] .header-title {
    font-size: clamp(19px, 2.2vw, 24px);
    font-weight: 700;
    letter-spacing: 0.09em;
}

body[data-theme="nebula_rain"] .header-subtitle,
body[data-theme="nebula_rain"] .header-subtitle.header-subtitle-meta {
    font-weight: 600;
}

body[data-theme="nebula_rain"] .carousel-item-title {
    font-size: 13.5px;
    font-weight: 700;
}

body[data-theme="nebula_rain"] .panel-title,
body[data-theme="nebula_rain"] .layout-title,
body[data-theme="nebula_rain"] .presenter-title,
body[data-theme="nebula_rain"] .slide-preview-title {
    font-weight: 700;
}

body[data-theme="nebula_rain"][data-hmi-layout="console"] .header-title {
    font-size: clamp(16px, 1.8vw, 20px);
    font-weight: 700;
    letter-spacing: 0.09em;
}

body[data-theme="nebula_rain"][data-hmi-layout="console"] .header-subtitle,
body[data-theme="nebula_rain"][data-hmi-layout="console"] .header-subtitle.header-subtitle-meta {
    font-weight: 600;
}

body[data-theme="nebula_rain"][data-hmi-layout="console"] .carousel-item-title {
    font-size: 11px;
    font-weight: 700;
}

body[data-theme="nebula_rain"][data-hmi-layout="console"] .carousel-item-number,
body[data-theme="nebula_rain"][data-hmi-layout="console"] .panel-title {
    font-weight: 700;
}
body[data-theme="nebula_rain"]::after {
    content: "";
    position: fixed;
    inset: 0;
    pointer-events: none;
    z-index: 0;
    background-image:
        linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.008)),
        linear-gradient(0deg, transparent 50%, rgba(255,255,255,0.04) 64%, transparent 84%);
    background-size: 2px 160px, 3px 220px;
    animation:
        code-rain 16s linear infinite,
        code-rain-slow 26s linear infinite reverse;
    mix-blend-mode: screen;
    opacity: var(--mi-overlay-opacity, 0.38);
}

body[data-theme="ops_cascade"] {
    --qi-blue: #f29f3f;
    --qi-blue-soft: #ffd38f;
    --qi-accent: #f4c542;
    --qi-text: #fff5eb;
    --qi-text-soft: #f1e2cd;
    --qi-bg: #12141c;
    --qi-bg-muted: #1b2231;
    --mi-sage: #242c3b;
    --mi-sand: #171b26;
    --mi-shadow: rgba(0, 0, 0, 0.65);
    --mi-page-bg: linear-gradient(180deg, #12141c 0%, #171b26 55%, #12141c 100%);
    --mi-header-bg: linear-gradient(120deg, #1b2231 0%, #222c3d 60%, #12141c 100%);
    --mi-menu-bg: #1b2231;
    --mi-menu-border: #2f3847;
    --mi-menu-text: var(--qi-text);
    --mi-menu-active-bg: rgba(244, 197, 66, 0.16);
    --mi-card-bg: #171b26;
    --mi-card-border: #2f3847;
    --mi-card-shadow: 0 14px 36px rgba(0, 0, 0, 0.55);
    --mi-stage-bg: #12141c;
    --mi-stage-border: #2f3847;
    --mi-preview-bg: radial-gradient(circle at 18% 10%, rgba(244, 197, 66, 0.12), transparent 32%), linear-gradient(135deg, #12141c 0%, #1b2231 100%);
    --mi-preview-border: #2f3847;
    --mi-preview-inner-border: #39445a;
    --mi-slide-item-bg: #171b26;
    --mi-slide-item-border: #2f3847;
    --mi-slide-item-active-bg: rgba(244, 197, 66, 0.16);
    --mi-slide-item-active-border: #f29f3f;
    --mi-slide-item-active-shadow: 0 0 0 3px rgba(242, 159, 63, 0.22);
    --mi-border: var(--mi-card-border);
    --mi-border-strong: var(--mi-stage-border);
}

body[data-theme="science_matrix"] {
    --qi-blue: #3bc4ff;
    --qi-blue-soft: #9fe2ff;
    --qi-accent: #2ad1ff;
    --qi-text: #f3fbff;
    --qi-text-soft: #d9ecff;
    --qi-bg: #0c141c;
    --qi-bg-muted: #142337;
    --mi-sage: #1a2d44;
    --mi-sand: #101b2b;
    --mi-shadow: rgba(0, 0, 0, 0.6);
    --mi-page-bg: linear-gradient(180deg, #0c141c 0%, #101b2b 55%, #0c141c 100%);
    --mi-header-bg: linear-gradient(120deg, #142337 0%, #1c2f46 60%, #0c141c 100%);
    --mi-menu-bg: #142337;
    --mi-menu-border: #243852;
    --mi-menu-text: var(--qi-text);
    --mi-menu-active-bg: rgba(59, 196, 255, 0.18);
    --mi-card-bg: #101b2b;
    --mi-card-border: #243852;
    --mi-card-shadow: 0 14px 36px rgba(0, 0, 0, 0.55);
    --mi-stage-bg: #0c141c;
    --mi-stage-border: #243852;
    --mi-preview-bg: radial-gradient(circle at 18% 10%, rgba(59, 196, 255, 0.14), transparent 32%), linear-gradient(135deg, #0c141c 0%, #142337 100%);
    --mi-preview-border: #243852;
    --mi-preview-inner-border: #2e4560;
    --mi-slide-item-bg: #101b2b;
    --mi-slide-item-border: #243852;
    --mi-slide-item-active-bg: rgba(59, 196, 255, 0.18);
    --mi-slide-item-active-border: #3bc4ff;
    --mi-slide-item-active-shadow: 0 0 0 3px rgba(59, 196, 255, 0.24);
    --mi-border: var(--mi-card-border);
    --mi-border-strong: var(--mi-stage-border);
}

body[data-theme="command_aurora"] {
    --qi-blue: #ffd35f;
    --qi-blue-soft: #64b5ff;
    --qi-accent: #64b5ff;
    --qi-text: #eaf2ff;
    --qi-text-soft: #c8d9f3;
    --qi-bg: #0f1224;
    --qi-bg-muted: #182139;
    --mi-sage: #1c2846;
    --mi-sand: #121a2f;
    --mi-shadow: rgba(0, 0, 0, 0.6);
    --mi-page-bg: linear-gradient(180deg, #0f1224 0%, #121a2f 55%, #0f1224 100%);
    --mi-header-bg: linear-gradient(120deg, #182139 0%, #1f2d4d 60%, #0f1224 100%);
    --mi-menu-bg: #182139;
    --mi-menu-border: #2c3a56;
    --mi-menu-text: var(--qi-text);
    --mi-menu-active-bg: rgba(100, 181, 255, 0.18);
    --mi-card-bg: #121a2f;
    --mi-card-border: #2c3a56;
    --mi-card-shadow: 0 14px 36px rgba(0, 0, 0, 0.55);
    --mi-stage-bg: #0f1224;
    --mi-stage-border: #2c3a56;
    --mi-preview-bg: radial-gradient(circle at 18% 10%, rgba(255, 211, 95, 0.14), transparent 32%), linear-gradient(135deg, #0f1224 0%, #182139 100%);
    --mi-preview-border: #2c3a56;
    --mi-preview-inner-border: #344467;
    --mi-slide-item-bg: #121a2f;
    --mi-slide-item-border: #2c3a56;
    --mi-slide-item-active-bg: rgba(100, 181, 255, 0.18);
    --mi-slide-item-active-border: #ffd35f;
    --mi-slide-item-active-shadow: 0 0 0 3px rgba(100, 181, 255, 0.24);
    --mi-border: var(--mi-card-border);
    --mi-border-strong: var(--mi-stage-border);
}

body[data-theme="lcars_flux"] {
    --qi-blue: #e77f2f;
    --qi-blue-soft: #f4c542;
    --qi-accent: #f4c542;
    --qi-text: #f4f8ff;
    --qi-text-soft: #d6e2f3;
    --qi-bg: #0d0f18;
    --qi-bg-muted: #161b30;
    --mi-sage: #1e2540;
    --mi-sand: #13192c;
    --mi-shadow: rgba(0, 0, 0, 0.6);
    --mi-page-bg: linear-gradient(180deg, #0d0f18 0%, #13192c 55%, #0d0f18 100%);
    --mi-header-bg: linear-gradient(120deg, #161b30 0%, #1f2740 60%, #0d0f18 100%);
    --mi-menu-bg: #161b30;
    --mi-menu-border: #24314c;
    --mi-menu-text: var(--qi-text);
    --mi-menu-active-bg: rgba(244, 197, 66, 0.14);
    --mi-card-bg: #13192c;
    --mi-card-border: #24314c;
    --mi-card-shadow: 0 14px 36px rgba(0, 0, 0, 0.55);
    --mi-stage-bg: #0d0f18;
    --mi-stage-border: #24314c;
    --mi-preview-bg: radial-gradient(circle at 18% 10%, rgba(244, 197, 66, 0.12), transparent 32%), linear-gradient(135deg, #0d0f18 0%, #161b30 100%);
    --mi-preview-border: #24314c;
    --mi-preview-inner-border: #2f3c5a;
    --mi-slide-item-bg: #13192c;
    --mi-slide-item-border: #24314c;
    --mi-slide-item-active-bg: rgba(244, 197, 66, 0.14);
    --mi-slide-item-active-border: #e77f2f;
    --mi-slide-item-active-shadow: 0 0 0 3px rgba(231, 127, 47, 0.22);
    --mi-border: var(--mi-card-border);
    --mi-border-strong: var(--mi-stage-border);
}

body[data-theme="night_ops"] {
    --qi-blue: #8FF2C8;
    --qi-blue-soft: #4ADE80;
    --qi-accent: #22C55E;
    --qi-text: #E2E8F0;
    --qi-text-soft: #94A3B8;
    --qi-bg: #0A0F14;
    --qi-bg-muted: #0F1720;
    --mi-sage: #1F2A25;
    --mi-sand: #0B1218;
    --mi-shadow: rgba(0, 0, 0, 0.6);
    --mi-page-bg: radial-gradient(circle at top left, #0A0F14 0%, #0F1720 60%, #121C26 100%);
    --mi-header-bg: linear-gradient(120deg, #0A0F14 0%, #0F1720 60%, #162230 100%);
    --mi-menu-bg: #0F1720;
    --mi-menu-border: #1F2A37;
    --mi-menu-text: #E2E8F0;
    --mi-menu-active-bg: #182635;
    --mi-card-bg: #0F1720;
    --mi-card-border: #1F2A37;
    --mi-card-shadow: 0 12px 26px rgba(0, 0, 0, 0.6);
    --mi-stage-bg: #0F1720;
    --mi-stage-border: #1F2A37;
    --mi-preview-bg: linear-gradient(135deg, #0F1720 0%, #0A0F14 100%);
    --mi-preview-border: #1F2A37;
    --mi-preview-inner-border: #2B3A4B;
    --mi-slide-item-bg: #0F1720;
    --mi-slide-item-border: #1F2A37;
    --mi-slide-item-active-bg: #111C26;
    --mi-slide-item-active-border: #22C55E;
    --mi-slide-item-active-shadow: 0 0 0 3px rgba(34, 197, 94, 0.25);
    --mi-border: var(--mi-card-border);
    --mi-border-strong: var(--mi-stage-border);
}

body[data-theme="high_contrast"] {
    --qi-blue: #111111;
    --qi-blue-soft: #333333;
    --qi-accent: #FFD600;
    --qi-text: #000000;
    --qi-text-soft: #111111;
    --qi-bg: #FFFFFF;
    --qi-bg-muted: #F2F2F2;
    --mi-sage: #222222;
    --mi-sand: #F2F2F2;
    --mi-shadow: rgba(0, 0, 0, 0.2);
    --mi-page-bg: #FFFFFF;
    --mi-header-bg: #000000;
    --mi-menu-bg: #FFFFFF;
    --mi-menu-border: #000000;
    --mi-menu-text: #000000;
    --mi-menu-active-bg: #FFD600;
    --mi-card-bg: #FFFFFF;
    --mi-card-border: #000000;
    --mi-card-shadow: 0 0 0 2px #000000;
    --mi-stage-bg: #FFFFFF;
    --mi-stage-border: #000000;
    --mi-preview-bg: #FFFFFF;
    --mi-preview-border: #000000;
    --mi-preview-inner-border: #000000;
    --mi-slide-item-bg: #FFFFFF;
    --mi-slide-item-border: #000000;
    --mi-slide-item-active-bg: #FFD600;
    --mi-slide-item-active-border: #000000;
    --mi-slide-item-active-shadow: 0 0 0 3px #000000;
    --mi-border: var(--mi-card-border);
    --mi-border-strong: var(--mi-stage-border);
}

body[data-theme="quality_irrigation"],
body[data-theme="light"],
body[data-theme="blues_green"],
body[data-theme="soil_field"],
body[data-theme="high_contrast"],
body[data-theme="retro"] {
    color-scheme: light;
    --mi-menu-text-strong: var(--qi-text);
    --mi-menu-text-muted: var(--qi-text-soft);
    --mi-console-control-text: var(--qi-text);
    --mi-console-control-muted: var(--qi-text-soft);
    --mi-console-control-accent: var(--qi-blue);
    --mi-console-agenda-bg: linear-gradient(180deg, rgba(255, 255, 255, 0.96) 0%, rgba(236, 242, 247, 0.98) 100%);
    --mi-console-agenda-border: rgba(15, 30, 45, 0.12);
    --mi-console-chip-bg: rgba(15, 30, 45, 0.08);
    --mi-console-chip-border: rgba(15, 30, 45, 0.14);
    --mi-console-chip-text: var(--qi-text);
    --mi-console-chip-active-bg: rgba(0, 147, 208, 0.2);
    --mi-console-chip-active-text: var(--qi-text);
    --mi-console-popover-bg: rgba(255, 255, 255, 0.98);
    --mi-console-popover-border: rgba(15, 30, 45, 0.16);
    --mi-console-popover-text: var(--qi-text);
    --mi-console-popover-muted: var(--qi-text-soft);
    --mi-header-text: #F8FAFC;
    --mi-header-subtext: #E2E8F0;
    --mi-header-meta: #F8FAFC;
    --mi-header-pill-bg: rgba(255, 255, 255, 0.92);
    --mi-header-pill-border: rgba(255, 255, 255, 0.6);
    --mi-header-pill-text: var(--qi-text);
}

body[data-theme="dark"],
body[data-theme="futuristic"],
body[data-theme="night_ops"],
body[data-theme="command_blue"],
body[data-theme="ops_amber"],
body[data-theme="medical_teal"],
body[data-theme="engineering_bronze"],
body[data-theme="science_cyan"],
body[data-theme="nebula_rain"],
body[data-theme="ops_cascade"],
body[data-theme="science_matrix"],
body[data-theme="command_aurora"],
body[data-theme="lcars_flux"],
body[data-theme="lcars"] {
    color-scheme: dark;
    --mi-header-text: #F8FAFC;
    --mi-header-subtext: #CBD5F5;
    --mi-header-meta: #E2E8F0;
    --mi-header-pill-bg: rgba(15, 23, 42, 0.75);
    --mi-header-pill-border: rgba(148, 163, 184, 0.35);
    --mi-header-pill-text: #F8FAFC;
}

body[data-theme="nebula_rain"],
body[data-theme="ops_cascade"],
body[data-theme="science_matrix"],
body[data-theme="command_aurora"],
body[data-theme="lcars_flux"],
body[data-theme="command_blue"],
body[data-theme="ops_amber"],
body[data-theme="medical_teal"],
body[data-theme="engineering_bronze"],
body[data-theme="science_cyan"],
body[data-theme="lcars"],
body[data-theme="dark"] {
    --mi-menu-text-strong: #F8FAFC;
    --mi-menu-text-muted: #D1DAE8;
    --mi-console-control-text: #F8FAFC;
    --mi-console-control-muted: #D1DAE8;
    --mi-console-control-accent: #E2E8F0;
    --mi-console-chip-text: #F8FAFC;
    --mi-console-chip-active-text: #F8FAFC;
}

body[data-theme="quality_irrigation"] {
    --mi-header-subtext: #F8FAFC;
}


* {
    box-sizing: border-box;
}

body {
    margin: 0;
    font-family: var(--mi-font-body);
    color: var(--qi-text);
    background: var(--mi-page-bg);
    position: relative;
    min-height: 100%;
}

.page {
    position: relative;
    z-index: 1;
}

body::before {
    content: "";
    position: fixed;
    inset: 0;
    background:
        radial-gradient(circle at 10% 15%, rgba(var(--mi-blue-rgb), 0.16), transparent 45%),
        radial-gradient(circle at 92% -10%, rgba(var(--mi-navy-rgb), 0.14), transparent 50%),
        linear-gradient(140deg, rgba(var(--mi-blue-rgb), 0.08), transparent 55%),
        repeating-linear-gradient(135deg, rgba(var(--mi-navy-rgb), 0.06) 0, rgba(var(--mi-navy-rgb), 0.06) 1px, transparent 1px, transparent 16px);
    pointer-events: none;
    z-index: 0;
}

.style-warning {
    position: fixed;
    top: 12px;
    left: 50%;
    transform: translateX(-50%);
    background: #FFF3CD;
    color: #6B4A35;
    border: 1px solid #FFECB5;
    border-radius: 999px;
    padding: 6px 12px;
    font-size: 11px;
    letter-spacing: 0.02em;
    z-index: 9999;
    display: none;
    max-width: min(90vw, 520px);
    text-align: center;
}

.style-warning.is-visible {
    display: block;
}

.page {
    min-height: 100vh;
    display: flex;
    flex-direction: column;
    min-width: 0;
}

body[data-hmi-layout="console"] .page {
    width: var(--mi-console-base-width, 100%);
    height: var(--mi-console-base-height, 100vh);
    overflow: hidden;
}

@supports (zoom: 1) {
    body[data-hmi-layout="console"] {
        zoom: var(--mi-console-scale, 1);
    }
}

@supports not (zoom: 1) {
    body[data-hmi-layout="console"] .page {
        transform: scale(var(--mi-console-scale, 1));
        transform-origin: top left;
    }
}

body[data-hmi-layout="console"] {
    --mi-console-scale: 1;
    --mi-console-base-width: 1920px;
    --mi-console-base-height: 1080px;
    --mi-console-header-height: clamp(50px, 7vh, 64px);
    --mi-console-menu-height: clamp(30px, 5vh, 40px);
    --mi-console-status-height: 0px;
    --mi-console-carousel-height: clamp(84px, 12vh, 140px);
    --mi-console-agenda-height: clamp(30px, 5.5vh, 44px);
    --mi-console-grid-gap: 12px;
    --mi-console-grid-padding-x: 14px;
    --mi-console-grid-padding-y: 10px;
    --mi-console-stage-padding-x: 12px;
    --mi-console-stage-padding-y: 10px;
    --mi-carousel-number: var(--mi-console-control-muted);
    --mi-carousel-title: var(--mi-console-control-text);
    --mi-carousel-label: var(--mi-console-control-muted);
}

body[data-hmi-layout="landscape"] {
}

body[data-hmi-layout="portrait"] {
}

body[data-hmi-layout="newspaper"] {
}

@media (max-height: 1080px) and (min-width: 1200px) {
    body[data-hmi-layout="console"] {
        --mi-console-header-height: clamp(46px, 6vh, 56px);
        --mi-console-menu-height: clamp(26px, 4.5vh, 34px);
        --mi-console-carousel-height: clamp(76px, 11vh, 124px);
        --mi-console-agenda-height: clamp(26px, 4.5vh, 36px);
        --mi-console-grid-gap: 10px;
        --mi-console-grid-padding-x: 10px;
        --mi-console-grid-padding-y: 8px;
        --mi-console-stage-padding-x: 10px;
        --mi-console-stage-padding-y: 8px;
    }

}

body[data-hmi-layout="console"][data-hmi-compact="true"] {
    --mi-console-header-height: clamp(36px, 4.8vh, 44px);
    --mi-console-menu-height: clamp(22px, 3.6vh, 26px);
    --mi-console-carousel-height: clamp(58px, 8vh, 84px);
    --mi-console-agenda-height: clamp(20px, 3.4vh, 26px);
    --mi-console-grid-gap: 6px;
    --mi-console-grid-padding-x: 8px;
    --mi-console-grid-padding-y: 4px;
    --mi-console-stage-padding-x: 8px;
    --mi-console-stage-padding-y: 4px;
    --mi-console-carousel-row-gap: 2px;
    --mi-console-carousel-padding-top: 6px;
    --mi-console-carousel-padding-bottom: 8px;
}

body[data-hmi-layout="console"][data-hmi-compact="true"] .header {
    padding: 6px var(--mi-console-grid-padding-x);
}

body[data-hmi-layout="console"][data-hmi-compact="true"] .menu-bar {
    padding: 2px var(--mi-console-grid-padding-x);
}

body[data-hmi-layout="console"][data-hmi-compact="true"] .carousel-row {
    padding: var(--mi-console-carousel-padding-top) var(--mi-console-grid-padding-x) var(--mi-console-carousel-padding-bottom);
    grid-template-rows: minmax(var(--mi-console-carousel-toolbar-min), auto) minmax(var(--mi-console-carousel-track-min), auto);
    row-gap: var(--mi-console-carousel-row-gap);
}

body[data-hmi-layout="console"][data-hmi-compact="true"] .carousel-status {
    font-size: 11px;
}

body[data-hmi-layout="console"][data-hmi-compact="true"] .carousel-item {
    min-width: clamp(100px, 18vw, 140px);
    padding: 4px 6px;
}

body[data-hmi-layout="console"][data-hmi-compact="true"] .carousel-item-number {
    font-size: 11px;
}

body[data-hmi-layout="console"][data-hmi-compact="true"] .carousel-item-title {
    font-size: 11px;
}

body[data-hmi-layout="console"][data-hmi-compact="true"] .agenda-row {
    padding: 3px var(--mi-console-grid-padding-x) 3px;
}

body[data-hmi-layout="console"][data-hmi-compact="true"] .agenda-row-chips {
    flex-wrap: nowrap;
    gap: 6px;
    overflow-x: auto;
    overflow-y: hidden;
}

body[data-hmi-layout="console"][data-hmi-compact="true"] .agenda-row {
    overflow: hidden;
}

body[data-hmi-layout="console"][data-hmi-compact="true"] .agenda-chip {
    padding: 3px 8px;
    font-size: 10px;
}

body[data-hmi-layout="console"][data-hmi-compact="true"] .rail-tabs {
    gap: 4px;
    grid-template-columns: repeat(auto-fit, minmax(64px, 1fr));
}

body[data-hmi-layout="console"][data-hmi-compact="true"] .rail-tab {
    padding: 4px 6px;
    font-size: 9px;
}

body[data-hmi-layout="console"][data-hmi-compact="true"] .rail-card {
    padding: 5px;
    gap: 4px;
}

body[data-hmi-layout="console"][data-hmi-compact="true"] .rail-title {
    font-size: 9px;
}

body[data-hmi-layout="console"][data-hmi-compact="true"] .rail-text,
body[data-hmi-layout="console"][data-hmi-compact="true"] .rail-next-body,
body[data-hmi-layout="console"][data-hmi-compact="true"] .rail-list {
    font-size: 9px;
}

body[data-hmi-layout="console"][data-hmi-compact="true"] .stage-header {
    font-size: 11px;
    gap: 8px;
    padding: 2px 0;
}

.header {
    display: grid;
    grid-template-columns: minmax(0, 1fr) auto minmax(0, 1fr);
    align-items: center;
    column-gap: 18px;
    padding: 18px 28px;
    background: var(--mi-header-bg);
    color: var(--mi-header-text);
    position: relative;
    overflow: visible;
    border-bottom: 2px solid rgba(255, 255, 255, 0.18);
    z-index: 950;
}

.header::after {
    content: "";
    position: absolute;
    left: 28px;
    right: 28px;
    bottom: 0;
    height: 2px;
    background: linear-gradient(90deg, var(--qi-gold) 0%, rgba(255, 255, 255, 0.2) 45%, var(--qi-gold) 100%);
    opacity: 0.8;
}

body[data-hmi-layout="console"] .header {
    padding: 8px var(--mi-console-grid-padding-x);
    min-height: var(--mi-console-header-height);
    column-gap: 12px;
}

body[data-hmi-view="control"] .header {
    padding: 2px var(--mi-console-grid-padding-x);
    column-gap: 10px;
    min-height: var(--mi-console-header-height);
    height: var(--mi-console-header-height);
    overflow: hidden;
}

body[data-hmi-layout="console"] .header::after {
    left: var(--mi-console-grid-padding-x);
    right: var(--mi-console-grid-padding-x);
}

.header-left {
    display: flex;
    align-items: center;
    gap: 16px;
    flex-wrap: wrap;
}

body[data-hmi-layout="console"] .header-left {
    gap: 10px;
}

body[data-hmi-view="control"] .header-left {
    gap: 4px;
}

.header-center {
    display: flex;
    align-items: center;
    justify-content: center;
    justify-self: center;
}

.header-logo {
    display: flex;
    align-items: center;
    padding: 6px 12px;
    border-radius: 14px;
    background: #FFFFFF;
    border: 1px solid rgba(0, 45, 98, 0.2);
}

body[data-hmi-layout="console"] .header-logo {
    padding: 4px 10px;
}

body[data-hmi-view="control"] .header-logo {
    padding: 2px 6px;
}

.header-logo img {
    height: 56px;
    width: auto;
    display: block;
    max-width: 240px;
    object-fit: contain;
    image-rendering: -webkit-optimize-contrast;
}

body[data-hmi-layout="console"] .header-logo img {
    height: 44px;
    max-width: 200px;
}

body[data-hmi-view="control"] .header-logo img {
    height: 26px;
    max-width: 140px;
}

.header-title {
    font-size: clamp(18px, 2vw, 22px);
    margin: 0;
    font-family: var(--mi-font-display);
    text-transform: uppercase;
    letter-spacing: 0.08em;
    color: inherit;
}

body[data-hmi-layout="console"] .header-title {
    font-size: clamp(15px, 1.6vw, 18px);
}

body[data-hmi-view="control"] .header-title {
    font-size: clamp(11px, 1.1vw, 13px);
    line-height: 1.1;
}

.header-subtitle {
    font-size: 13px;
    letter-spacing: 0.12em;
    text-transform: uppercase;
    color: var(--mi-header-subtext);
    margin-top: 4px;
}

body[data-hmi-layout="console"] .header-subtitle {
    font-size: 11px;
    margin-top: 2px;
}

body[data-hmi-view="control"] .header-subtitle {
    font-size: 8px;
    line-height: 1.1;
    margin-top: 0;
}

.header-subtitle.header-subtitle-meta {
    color: var(--mi-header-meta);
    letter-spacing: 0.1em;
}

.header-stack {
    display: grid;
    gap: 2px;
    padding: 6px 10px;
    border-radius: 12px;
    background: var(--mi-header-pill-bg);
    border: 1px solid var(--mi-header-pill-border);
    color: var(--mi-header-pill-text);
    box-shadow: none;
}

body[data-hmi-layout="console"] .header-stack {
    padding: 4px 8px;
    border-radius: 10px;
    background: rgba(255, 255, 255, 0.94);
    border-color: rgba(0, 45, 98, 0.2);
    color: var(--qi-text);
}

.header-stack .header-subtitle,
.header-stack .header-subtitle.header-subtitle-meta {
    color: currentColor;
    opacity: 0.76;
}

.theme-badge {
    display: inline-flex;
    align-items: center;
    gap: 8px;
    padding: 6px 10px;
    border-radius: 999px;
    background: var(--mi-menu-active-bg);
    color: var(--mi-header-pill-text);
    border: 1px solid var(--mi-menu-border);
    font-size: 11px;
    letter-spacing: 0.08em;
    text-transform: uppercase;
    font-family: var(--mi-font-display);
}

body[data-hmi-view="control"] .theme-badge {
    padding: 4px 8px;
    font-size: 10px;
    letter-spacing: 0.06em;
}

.theme-chip {
    width: 12px;
    height: 12px;
    border-radius: 50%;
    background: var(--qi-accent);
    box-shadow: 0 0 0 2px rgba(255,255,255,0.18), 0 0 0 4px rgba(0,0,0,0.12);
    display: inline-block;
}

.header-right {
    display: flex;
    align-items: center;
    gap: 12px;
    flex-wrap: wrap;
    justify-content: flex-end;
    row-gap: 6px;
    justify-self: end;
    overflow: visible;
}

body[data-hmi-layout="console"] .header-right {
    gap: 8px;
}

body[data-hmi-view="control"] .header-right {
    gap: 6px;
    row-gap: 4px;
}

.tools-combobox {
    position: relative;
    overflow: visible;
}

.tools-combobox summary {
    list-style: none;
    cursor: pointer;
    padding: 8px 14px;
    border-radius: 999px;
    border: 1px solid var(--mi-header-pill-border);
    color: var(--mi-header-pill-text);
    font-size: 13px;
    text-transform: uppercase;
    letter-spacing: 0.08em;
    font-family: var(--mi-font-display);
    background: var(--mi-header-pill-bg);
    min-height: 32px;
    display: inline-flex;
    align-items: center;
}

body[data-hmi-layout="console"] .tools-combobox summary {
    padding: 8px 16px;
    font-size: 13px;
    min-height: 34px;
}

body[data-hmi-view="control"] .tools-combobox summary {
    padding: 6px 12px;
    font-size: 12px;
    min-height: 28px;
}

.tools-combobox summary::-webkit-details-marker {
    display: none;
}

.tools-panel {
    position: fixed;
    top: var(--tools-panel-top, 0px);
    left: var(--tools-panel-left, 0px);
    min-width: 260px;
    max-width: min(90vw, 360px);
    max-height: min(80vh, 560px);
    overflow-y: auto;
    background: rgba(8, 18, 30, 0.95);
    border: 1px solid rgba(0, 147, 208, 0.5);
    border-radius: 16px;
    padding: 12px;
    display: grid;
    gap: 8px;
    z-index: 2000;
    box-shadow: 0 16px 36px rgba(0, 0, 0, 0.35);
}

.floating-panels {
    position: fixed;
    inset: 0;
    z-index: 3000;
    pointer-events: none;
}

.floating-panels .tools-panel {
    pointer-events: auto;
}

.tools-panel .file-input,
.tools-panel .deck-select {
    background: rgba(255, 255, 255, 0.08);
    border-color: rgba(0, 147, 208, 0.4);
    color: #EAF6FF;
}

.tools-panel .panel-text,
.tools-panel .panel-text-muted {
    color: rgba(207, 223, 239, 0.7);
    font-size: 11px;
}

.menu-bar {
    display: flex;
    gap: 12px;
    align-items: center;
    padding: 8px 20px;
    background: var(--mi-menu-bg);
    border-bottom: 1px solid var(--mi-menu-border);
    border-top: 1px solid rgba(0, 45, 98, 0.08);
    flex-wrap: wrap;
    position: sticky;
    top: 0;
    z-index: 800;
    box-shadow: 0 8px 18px rgba(0, 45, 98, 0.08);
}

body[data-hmi-layout="console"] .menu-bar {
    padding: 4px var(--mi-console-grid-padding-x);
    min-height: var(--mi-console-menu-height);
}

.carousel-row {
    display: flex;
    flex-direction: column;
    gap: 10px;
    padding: 14px 20px 12px;
    background: var(--mi-menu-bg);
    border-bottom: 1px solid var(--mi-menu-border);
    box-shadow: 0 8px 16px rgba(0, 45, 98, 0.06);
    min-height: 88px;
}

.carousel-row.is-hidden {
    display: none;
}

.agenda-row {
    display: none;
}

.carousel-toolbar {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 12px;
    flex-wrap: wrap;
}

.carousel-status {
    display: flex;
    align-items: center;
    gap: 10px;
    font-size: 13px;
    text-transform: uppercase;
    letter-spacing: 0.08em;
    color: var(--mi-carousel-number);
    flex-wrap: wrap;
}

.carousel-label {
    font-family: var(--mi-font-display);
    color: var(--mi-carousel-label);
}

.carousel-current {
    font-family: var(--mi-font-display);
    color: var(--mi-carousel-title);
    text-transform: none;
    letter-spacing: 0.04em;
    font-size: 13px;
    max-width: min(52vw, 360px);
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
}

.carousel-count {
    color: var(--mi-carousel-number);
    font-weight: 600;
}

.carousel-controls {
    display: flex;
    align-items: center;
    gap: 12px;
    font-size: 13px;
    text-transform: uppercase;
    letter-spacing: 0.08em;
    color: var(--mi-carousel-number);
    flex-wrap: wrap;
}

.carousel-nav {
    display: flex;
    align-items: center;
    gap: 6px;
}

.carousel-nav-button {
    width: var(--mi-carousel-control-size);
    height: var(--mi-carousel-control-size);
    border-radius: 10px;
    border: 1px solid var(--mi-menu-border);
    background: var(--mi-menu-bg);
    color: var(--mi-carousel-title);
    font-size: 12px;
    font-weight: 700;
    cursor: pointer;
    transition: transform 160ms ease, box-shadow 160ms ease, border-color 160ms ease;
}

.carousel-nav-button:hover {
    border-color: var(--mi-slide-item-active-border);
    box-shadow: 0 0 0 2px rgba(0, 147, 208, 0.12);
    transform: translateY(-1px);
}

.carousel-nav-button:focus-visible {
    outline: 2px solid var(--mi-slide-item-active-border);
    outline-offset: 2px;
}

.carousel-combobox {
    display: flex;
    align-items: center;
    gap: 8px;
}

.carousel-utilities {
    display: flex;
    align-items: flex-end;
    gap: 14px;
    flex-wrap: wrap;
}

.carousel-utility {
    display: flex;
    flex-direction: column;
    gap: 4px;
    min-width: 150px;
}

.carousel-muted {
    display: none;
}

.carousel-select,
.carousel-input {
    min-width: 92px;
    border: 1px solid var(--mi-menu-border);
    border-radius: 8px;
    padding: 6px 10px;
    font-size: 12px;
    background: var(--mi-menu-bg);
    color: var(--mi-menu-text-strong);
    font-family: var(--mi-font-display);
    text-transform: uppercase;
    letter-spacing: 0.08em;
    font-weight: 600;
}

.carousel-input {
    width: 96px;
}

.carousel-select option {
    color: var(--mi-menu-text-strong);
    background: var(--mi-menu-bg);
}

.carousel-track {
    display: flex;
    gap: 10px;
    justify-content: center;
    align-items: center;
    overflow: hidden;
    padding: 10px 0 12px;
    scroll-snap-type: x mandatory;
    width: 100%;
}

.carousel-track::-webkit-scrollbar {
    height: 0;
}

.carousel-item {
    min-width: clamp(120px, 14vw, 180px);
    max-width: clamp(160px, 18vw, 220px);
    flex: 0 0 auto;
    border: 1px solid var(--mi-slide-item-border);
    background: var(--mi-slide-item-bg);
    border-radius: 12px;
    padding: 8px 10px;
    text-align: left;
    cursor: pointer;
    scroll-snap-align: start;
    transition: transform 160ms ease, box-shadow 160ms ease, border-color 160ms ease;
    min-height: 68px;
    display: flex;
    flex-direction: column;
    justify-content: center;
    gap: 6px;
    transform-origin: center center;
}

.carousel-item.is-active {
    border-color: var(--mi-slide-item-active-border);
    background: var(--mi-slide-item-active-bg);
    box-shadow: var(--mi-slide-item-active-shadow);
}

.carousel-item--current {
    transform: scale(1.12);
    z-index: 1;
}

.carousel-item--prev,
.carousel-item--next {
    opacity: 0.95;
    transform: scale(0.94);
}

.carousel-item--far {
    opacity: 0.85;
    transform: scale(0.88);
}

.carousel-item-number {
    font-size: 11px;
    text-transform: uppercase;
    letter-spacing: 0.08em;
    color: var(--mi-carousel-number);
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    font-weight: 600;
    text-shadow: var(--mi-carousel-text-shadow);
}

.carousel-item-title {
    margin-top: 0;
    font-size: 12.5px;
    color: var(--mi-carousel-title);
    font-weight: 600;
    line-height: 1.25;
    max-height: 2.5em;
    overflow: hidden;
    text-overflow: ellipsis;
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    text-shadow: var(--mi-carousel-text-shadow);
}

body[data-hmi-layout="console"] .carousel-row {
    padding: var(--mi-console-carousel-padding-top) var(--mi-console-grid-padding-x) var(--mi-console-carousel-padding-bottom);
    min-height: max(var(--mi-console-carousel-height), var(--mi-console-carousel-min-height));
    height: max(var(--mi-console-carousel-height), var(--mi-console-carousel-min-height));
    display: grid;
    grid-template-rows: minmax(var(--mi-console-carousel-toolbar-min), auto) minmax(var(--mi-console-carousel-track-min), auto);
    row-gap: var(--mi-console-carousel-row-gap);
}

body[data-hmi-layout="console"] .agenda-row {
    padding: 6px var(--mi-console-grid-padding-x) 6px;
    min-height: var(--mi-console-agenda-height);
    height: var(--mi-console-agenda-height);
    display: grid;
    grid-template-columns: auto 1fr auto;
    align-items: center;
    gap: 10px;
    border-bottom: 1px solid var(--mi-console-agenda-border);
    background: var(--mi-console-agenda-bg);
    position: relative;
    overflow: visible;
}

body[data-hmi-layout="newspaper"] .agenda-row {
    padding: 6px 20px 6px;
    min-height: 36px;
    height: 36px;
    display: grid;
    grid-template-columns: auto 1fr auto;
    align-items: center;
    gap: 10px;
    border-bottom: 1px solid var(--mi-console-agenda-border);
    background: var(--mi-console-agenda-bg);
    position: relative;
    overflow: visible;
}

body[data-hmi-layout="console"] .agenda-row.is-hidden {
    display: none;
}

body[data-hmi-layout="console"][data-agenda-row-hidden="true"] {
    --mi-console-agenda-height: 0px;
}

body[data-hmi-layout="console"] .agenda-row-label {
    font-size: 12px;
    text-transform: uppercase;
    letter-spacing: 0.14em;
    color: var(--mi-console-control-muted);
    font-family: var(--mi-font-display);
}

body[data-hmi-layout="newspaper"] .agenda-row-label {
    font-size: 12px;
    text-transform: uppercase;
    letter-spacing: 0.14em;
    color: var(--mi-console-control-muted);
    font-family: var(--mi-font-display);
}

body[data-hmi-layout="console"] .agenda-row-chips {
    display: flex;
    flex-wrap: nowrap;
    gap: 8px;
    align-items: center;
    overflow-x: auto;
    overflow-y: hidden;
    scrollbar-width: thin;
}

body[data-hmi-layout="newspaper"] .agenda-row-chips {
    display: flex;
    flex-wrap: nowrap;
    gap: 8px;
    align-items: center;
    overflow-x: auto;
    overflow-y: hidden;
    scrollbar-width: thin;
}

body[data-hmi-layout="console"] .agenda-chip {
    padding: 4px 10px;
    border-radius: 999px;
    background: var(--mi-console-chip-bg);
    color: var(--mi-console-chip-text);
    font-size: 12px;
    font-weight: 600;
    letter-spacing: 0.03em;
    border: 1px solid var(--mi-console-chip-border);
    cursor: pointer;
    transition: transform 0.15s ease, border-color 0.15s ease, background 0.15s ease;
    white-space: nowrap;
    line-height: 1.2;
}

body[data-hmi-layout="newspaper"] .agenda-chip {
    padding: 4px 10px;
    border-radius: 999px;
    background: var(--mi-console-chip-bg);
    color: var(--mi-console-chip-text);
    font-size: 12px;
    font-weight: 600;
    letter-spacing: 0.03em;
    border: 1px solid var(--mi-console-chip-border);
    cursor: pointer;
    transition: transform 0.15s ease, border-color 0.15s ease, background 0.15s ease;
    white-space: nowrap;
    line-height: 1.2;
}

body[data-hmi-layout="console"] .agenda-chip.is-active {
    background: var(--mi-console-chip-active-bg);
    color: var(--mi-console-chip-active-text);
    box-shadow: 0 0 0 1px var(--mi-console-chip-active-border);
}

body[data-hmi-layout="newspaper"] .agenda-chip.is-active {
    background: var(--mi-console-chip-active-bg);
    color: var(--mi-console-chip-active-text);
    box-shadow: 0 0 0 1px var(--mi-console-chip-active-border);
}

body[data-hmi-layout="console"] .agenda-chip:focus-visible,
body[data-hmi-layout="console"] .agenda-chip:hover {
    border-color: var(--mi-console-chip-active-border);
    outline: none;
}

body[data-hmi-layout="newspaper"] .agenda-chip:focus-visible,
body[data-hmi-layout="newspaper"] .agenda-chip:hover {
    border-color: var(--mi-console-chip-active-border);
    outline: none;
}

body[data-hmi-layout="console"] .agenda-row-empty {
    grid-column: 2 / -1;
    margin: 0;
    font-size: 12px;
    color: var(--mi-console-control-muted);
}

body[data-hmi-layout="newspaper"] .agenda-row-empty {
    grid-column: 2 / -1;
    margin: 0;
    font-size: 12px;
    color: var(--mi-console-control-muted);
}

body[data-hmi-layout="console"] .agenda-row-message {
    position: absolute;
    right: 16px;
    bottom: -18px;
    margin: 0;
    font-size: 12px;
    color: var(--mi-console-control-accent);
}

body[data-hmi-layout="newspaper"] .agenda-row-message {
    position: absolute;
    right: 16px;
    bottom: -18px;
    margin: 0;
    font-size: 12px;
    color: var(--mi-console-control-accent);
}

.agenda-row-actions {
    display: flex;
    align-items: center;
    justify-content: flex-end;
    gap: 8px;
}

.agenda-detail-status {
    border: 1px solid var(--mi-console-chip-border);
    background: rgba(255, 255, 255, 0.08);
    color: var(--mi-console-control-muted);
    padding: 4px 10px;
    border-radius: 999px;
    font-size: 10px;
    text-transform: uppercase;
    letter-spacing: 0.08em;
    font-family: var(--mi-font-display);
    min-height: 22px;
    display: inline-flex;
    align-items: center;
}

.agenda-detail-status.is-active {
    color: #F2FBFF;
    border-color: rgba(0, 147, 208, 0.6);
    background: rgba(0, 147, 208, 0.2);
}

.agenda-detail-toggle {
    border: 1px solid var(--mi-console-chip-border);
    background: rgba(255, 255, 255, 0.08);
    color: var(--mi-console-control-text);
    padding: 4px 10px;
    border-radius: 999px;
    font-size: 11px;
    text-transform: uppercase;
    letter-spacing: 0.08em;
    font-family: var(--mi-font-display);
    cursor: pointer;
    min-height: 24px;
}

.agenda-detail-toggle.is-active {
    background: rgba(0, 147, 208, 0.2);
    border-color: rgba(0, 147, 208, 0.6);
    color: #F2FBFF;
}

body[data-hmi-layout="console"] .agenda-popover {
    position: absolute;
    top: calc(100% + 6px);
    left: 12px;
    width: min(360px, 90%);
    background: var(--mi-console-popover-bg);
    border: 1px solid var(--mi-console-popover-border);
    border-radius: 12px;
    padding: 12px;
    box-shadow: 0 18px 40px rgba(0, 0, 0, 0.35);
    z-index: 20;
    display: grid;
    gap: 8px;
}

body[data-hmi-layout="console"] .agenda-popover-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    gap: 8px;
    color: var(--mi-console-popover-text);
    font-size: 12px;
    text-transform: uppercase;
    letter-spacing: 0.08em;
}

body[data-hmi-layout="console"] .agenda-popover-count {
    color: var(--mi-console-popover-muted);
    font-size: 11px;
}

body[data-hmi-layout="console"] .agenda-popover-list {
    display: grid;
    gap: 6px;
    margin: 0;
    padding-left: 18px;
    color: var(--mi-console-popover-text);
    font-size: 12px;
}

body[data-hmi-layout="console"] .agenda-popover-empty,
body[data-hmi-layout="console"] .agenda-popover-tip {
    margin: 0;
    font-size: 11px;
    color: var(--mi-console-popover-muted);
}

body[data-hmi-layout="console"] .carousel-track {
    gap: 8px;
    max-height: none;
    justify-content: flex-start;
    align-items: stretch;
    overflow-x: auto;
    overflow-y: hidden;
    padding-bottom: 2px;
    scroll-snap-type: x proximity;
}

body[data-hmi-layout="console"] .carousel-track::-webkit-scrollbar {
    height: 6px;
}

body[data-hmi-layout="console"] .carousel-track::-webkit-scrollbar-thumb {
    background: rgba(0, 45, 98, 0.2);
    border-radius: 999px;
}

body[data-hmi-layout="console"] .carousel-item {
    min-width: 120px;
    min-height: 40px;
    padding: 4px 8px;
}

body[data-hmi-layout="console"] .carousel-current {
    max-width: min(42vw, 340px);
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    font-size: 12px;
    letter-spacing: 0.04em;
}

body[data-hmi-layout="console"] .carousel-status,
body[data-hmi-layout="console"] .carousel-controls {
    font-size: 12px;
    letter-spacing: 0.06em;
    gap: 8px;
}

body[data-hmi-layout="console"] .carousel-label,
body[data-hmi-layout="console"] .carousel-select-label {
    display: none;
}

body[data-hmi-layout="console"] .carousel-item-number {
    font-size: 10px;
}

body[data-hmi-layout="console"] .carousel-item-title {
    font-size: 11px;
    line-height: 1.1;
    -webkit-line-clamp: 1;
    white-space: nowrap;
    text-overflow: ellipsis;
    overflow: hidden;
}

body[data-hmi-layout="console"] .carousel-utility {
    min-width: 140px;
}

body[data-hmi-layout="console"] .file-input,
body[data-hmi-layout="console"] .deck-select {
    font-size: 12px;
    padding: 6px 8px;
    border-radius: 8px;
}

body[data-hmi-layout="console"] .file-input-label {
    font-size: 11px;
    margin-bottom: 2px;
}

.theme-inline {
    display: inline-flex;
    align-items: center;
    gap: 6px;
    padding: 6px 10px;
    border: 1px solid var(--mi-menu-border);
    border-radius: 10px;
    background: var(--mi-menu-bg);
}

.menu-panel .theme-inline {
    width: 100%;
    justify-content: space-between;
    gap: 12px;
    padding: 10px;
}

.theme-label {
    font-size: 12px;
    letter-spacing: 0.08em;
    text-transform: uppercase;
    color: var(--mi-menu-text-strong);
    font-weight: 600;
}

.theme-select {
    min-width: 150px;
    padding: 6px 8px;
    border-radius: 8px;
    border: 1px solid var(--mi-menu-border);
    background: var(--qi-bg);
    color: var(--mi-menu-text-strong);
    font-family: var(--mi-font-body);
}

.theme-select option {
    color: var(--mi-menu-text-strong);
    background: var(--qi-bg);
}

.menu {
    position: relative;
}

.menu summary {
    list-style: none;
    cursor: pointer;
    padding: 6px 12px;
    border-radius: 999px;
    font-size: 13px;
    color: var(--mi-menu-text-strong);
    border: 1px solid var(--mi-menu-border);
    user-select: none;
    font-family: var(--mi-font-display);
    text-transform: uppercase;
    letter-spacing: 0.08em;
    font-weight: 600;
    background: var(--mi-menu-bg);
    box-shadow: 0 4px 10px rgba(0, 45, 98, 0.08);
    display: inline-flex;
    align-items: center;
    gap: 8px;
}

.menu-badge {
    width: 18px;
    height: 18px;
    border-radius: 6px;
    display: inline-block;
    object-fit: contain;
}

body[data-hmi-layout="console"] .theme-label {
    font-size: 13px;
}

body[data-hmi-layout="console"] .theme-select {
    font-size: 13px;
}

body[data-hmi-view="control"] .menu-panel .theme-label {
    font-size: 26px;
}

body[data-hmi-view="control"] .menu-panel .theme-select {
    font-size: 26px;
    min-height: 40px;
}

body[data-hmi-layout="console"] .menu summary {
    font-size: 14px;
    padding: 7px 12px;
}

body[data-hmi-view="control"] .menu-bar {
    background: linear-gradient(180deg, rgba(9, 18, 34, 0.9), rgba(9, 18, 34, 0.82)),
        var(--mi-menu-bg);
    border-top: 1px solid rgba(0, 147, 208, 0.12);
    border-bottom: 1px solid rgba(0, 147, 208, 0.18);
    box-shadow: 0 10px 20px rgba(4, 12, 24, 0.35);
    padding: 2px var(--mi-console-grid-padding-x);
}

body[data-hmi-view="control"] {
    --mi-console-header-height: clamp(44px, 5vh, 52px);
    --mi-console-menu-height: clamp(40px, 4.6vh, 48px);
    --mi-console-carousel-height: clamp(68px, 8vh, 90px);
    --mi-console-carousel-min-height: 82px;
    --mi-console-agenda-height: clamp(24px, 3.6vh, 36px);
    --mi-console-grid-padding-y: 8px;
    --mi-console-stage-padding-y: 6px;
    --mi-console-carousel-padding-top: 6px;
    --mi-console-carousel-padding-bottom: 8px;
    --mi-console-carousel-row-gap: 2px;
    --mi-console-carousel-track-min: 40px;
    --mi-console-carousel-toolbar-min: 26px;
    --mi-carousel-control-size: 24px;
}

body[data-hmi-view="control"] .menu summary {
    background: rgba(8, 18, 30, 0.92);
    border-color: rgba(0, 147, 208, 0.35);
    color: #EAF6FF;
    box-shadow: 0 6px 14px rgba(0, 0, 0, 0.28);
    font-size: 26px;
    line-height: 1;
    padding: 4px 10px;
    min-height: 36px;
    letter-spacing: 0.06em;
}

body[data-hmi-view="control"] .menu-badge {
    width: 24px;
    height: 24px;
}

body[data-hmi-view="control"] .menu[open] summary {
    background: rgba(9, 26, 48, 0.98);
    border-color: rgba(0, 147, 208, 0.6);
}

body[data-hmi-view="control"] .menu-panel {
    background: rgba(8, 18, 30, 0.97);
    border-color: rgba(0, 147, 208, 0.4);
    color: #EAF6FF;
    min-width: 320px;
}

body[data-hmi-view="control"] .menu-panel .menu-item {
    color: #EAF6FF;
    font-size: 26px;
    padding: 6px 12px;
    min-height: 36px;
    line-height: 1.1;
}

body[data-hmi-view="control"] .menu-item-badge {
    width: 24px;
    height: 24px;
}

body[data-hmi-view="control"] .menu-panel .menu-item:hover,
body[data-hmi-view="control"] .menu-panel .menu-item:focus-visible {
    background: rgba(0, 147, 208, 0.18);
}

body[data-hmi-view="control"] .main-grid {
    padding-bottom: 6px;
}

body[data-hmi-view="control"] .stage {
    gap: 10px;
    padding-bottom: calc(var(--mi-console-stage-padding-y) + 24px);
}

body[data-hmi-view="control"] .stage-header {
    font-size: 11px;
    letter-spacing: 0.06em;
}

body[data-hmi-view="control"] .header-left {
    flex-wrap: nowrap;
}

body[data-hmi-view="control"] .header-stack {
    padding: 0;
    border: none;
    background: transparent;
    box-shadow: none;
    gap: 0;
}

body[data-hmi-view="control"] .header-stack .header-subtitle:not([data-deck-title]) {
    display: none;
}

body[data-hmi-view="control"] .stage-body {
    grid-template-columns: minmax(0, 1fr) minmax(220px, 280px);
    gap: 10px;
}

body[data-hmi-view="control"] .slide-preview {
    padding: 10px;
}

body[data-hmi-view="control"] .carousel-track {
    padding: 6px 0 8px;
}

body[data-hmi-view="control"] .carousel-item {
    min-height: 48px;
    padding: 4px 6px;
    gap: 4px;
}

body[data-hmi-view="control"] .carousel-status,
body[data-hmi-view="control"] .carousel-controls {
    font-size: 11px;
    gap: 6px;
}

body[data-hmi-view="control"] .carousel-nav {
    gap: 4px;
}

body[data-hmi-view="control"] .carousel-nav-button {
    font-size: 10px;
    border-radius: 8px;
}

body[data-hmi-view="control"] .carousel-item-number {
    font-size: 10px;
}

body[data-hmi-view="control"] .carousel-item-title {
    font-size: 11px;
    line-height: 1.2;
}

body[data-hmi-view="control"] .stage-rail {
    gap: 6px;
    min-height: 0;
}

body[data-hmi-view="control"] .stage-rail .rail-card {
    padding: 8px;
    min-height: 0;
    max-height: 100%;
    overflow-y: auto;
}

body[data-hmi-view="control"] .side-panel {
    gap: 10px;
}

body[data-hmi-view="control"] .panel-card {
    padding: 10px;
}

body[data-hmi-view="control"] .panel-title {
    font-size: 12px;
    margin-bottom: 6px;
}

body[data-hmi-view="control"] .panel-list,
body[data-hmi-view="control"] .panel-text {
    font-size: 12px;
    line-height: 1.4;
}

.menu summary::-webkit-details-marker {
    display: none;
}

.menu[open] summary {
    background: var(--mi-menu-active-bg);
    border-color: var(--mi-menu-border);
}

.menu-panel {
    position: absolute;
    top: calc(100% + 6px);
    left: 0;
    min-width: 240px;
    background-color: var(--mi-card-bg);
    background-image: var(--mi-card-shade);
    border: 1px solid var(--mi-card-border);
    border-radius: 12px;
    padding: 8px;
    display: grid;
    gap: 6px;
    border-top: 3px solid var(--qi-blue);
    z-index: 10;
    box-shadow: 0 16px 30px rgba(0, 45, 98, 0.12);
}

.menu-panel .menu-item {
    border: none;
    background: transparent;
    text-align: left;
    padding: 8px 10px;
    border-radius: 8px;
    font-size: 13px;
    color: var(--mi-menu-text-strong);
    font-weight: 600;
    cursor: pointer;
    display: inline-flex;
    align-items: center;
    gap: 8px;
}

.menu-item-badge {
    width: 18px;
    height: 18px;
    border-radius: 6px;
    display: inline-block;
    object-fit: contain;
}

.menu-panel .menu-item:hover,
.menu-panel .menu-item:focus-visible {
    background: var(--qi-bg-muted);
    outline: none;
}

.status-pill {
    background: var(--mi-header-pill-bg);
    color: var(--mi-header-pill-text);
    padding: 6px 12px;
    border-radius: 999px;
    font-size: 12px;
    letter-spacing: 0.08em;
    text-transform: uppercase;
    border: 1px solid var(--mi-header-pill-border);
    font-family: var(--mi-font-display);
    min-height: 28px;
    display: inline-flex;
    align-items: center;
}

.status-pill-small {
    font-size: 10px;
    padding: 4px 10px;
    min-height: 22px;
    letter-spacing: 0.06em;
}

.chart-data-badge.is-hidden {
    display: none;
}

.help-button {
    border: 1px solid var(--mi-header-pill-border);
    background: var(--mi-header-pill-bg);
    color: var(--mi-header-pill-text);
    padding: 8px 14px;
    border-radius: 999px;
    font-size: 13px;
    cursor: pointer;
    text-decoration: none;
    display: inline-flex;
    align-items: center;
    text-transform: uppercase;
    letter-spacing: 0.08em;
    font-family: var(--mi-font-display);
    min-height: 32px;
}

.main-grid {
    display: grid;
    grid-template-columns: minmax(200px, 260px) minmax(720px, 1fr) minmax(220px, 300px);
    gap: 20px;
    padding: 20px 24px 16px;
    flex: 1;
    align-items: start;
    min-height: calc(100vh - 200px);
    min-width: 0;
    min-height: 0;
}

body:not([data-hmi-layout="console"]) .main-grid {
    min-height: var(--mi-main-grid-height, calc(100vh - 200px));
}

body[data-hmi-layout="console"] .main-grid {
    gap: var(--mi-console-grid-gap);
    padding: var(--mi-console-grid-padding-y) var(--mi-console-grid-padding-x) 10px;
    min-height: calc(100vh - var(--mi-console-header-height) - var(--mi-console-menu-height) - var(--mi-console-carousel-height) - var(--mi-console-agenda-height) - var(--mi-console-status-height) - 32px);
    grid-template-columns: minmax(0, 1fr);
    grid-template-rows: minmax(0, 1fr);
    height: calc(100vh - var(--mi-console-header-height) - var(--mi-console-menu-height) - var(--mi-console-carousel-height) - var(--mi-console-agenda-height) - var(--mi-console-status-height) - 32px);
    min-height: 0;
    align-items: stretch;
}

body[data-hmi-layout="newspaper"] .main-grid {
    grid-template-columns: minmax(520px, 1.45fr) minmax(360px, 0.9fr);
    grid-template-rows: auto 1fr auto;
    gap: 18px;
    padding: 18px 20px 22px;
    min-height: 0;
    height: var(--mi-main-grid-height, calc(100vh - 200px));
    align-items: stretch;
}

body[data-hmi-layout="newspaper"] .main-grid.layout-hide-list,
body[data-hmi-layout="newspaper"] .main-grid.layout-hide-side,
body[data-hmi-layout="newspaper"] .main-grid.layout-hide-list.layout-hide-side {
    grid-template-columns: minmax(520px, 1.45fr) minmax(360px, 0.9fr);
}

body[data-hmi-layout="newspaper"] .stage {
    grid-column: 1;
    grid-row: 1 / span 3;
    max-width: none;
    margin: 0;
}

body[data-hmi-layout="newspaper"] .slide-list-panel {
    grid-column: 2;
    grid-row: 1;
}

body[data-hmi-layout="newspaper"] .presenter-panel {
    grid-column: 2;
    grid-row: 2;
    display: flex;
}

body[data-hmi-layout="newspaper"] .side-panel {
    grid-column: 2;
    grid-row: 3;
}

body[data-hmi-layout="landscape"] .main-grid,
body[data-hmi-layout="portrait"] .main-grid {
    grid-template-columns: minmax(0, 1fr);
    grid-template-rows: minmax(0, 1fr);
    gap: 12px;
    padding: 12px 14px 16px;
    min-height: auto;
    height: var(--mi-main-grid-height, calc(100vh - 200px));
    min-height: 0;
    flex: 0 0 auto;
    align-items: stretch;
}

body[data-hmi-layout="portrait"] .main-grid {
    padding: 8px 10px 12px;
    gap: 8px;
}

body[data-hmi-layout="landscape"] .stage,
body[data-hmi-layout="portrait"] .stage {
    max-width: none;
    width: 100%;
    margin: 0;
}

body[data-hmi-layout="landscape"] .stage {
    padding: 12px 14px;
}

body[data-hmi-layout="portrait"] .stage {
    padding: 8px 10px;
}

body[data-hmi-layout="landscape"] .stage-body,
body[data-hmi-layout="portrait"] .stage-body {
    display: flex;
    flex-direction: column;
    gap: 12px;
    align-items: stretch;
}

body[data-hmi-layout="landscape"] .stage-rail,
body[data-hmi-layout="portrait"] .stage-rail {
    display: grid;
    grid-auto-flow: column;
    grid-auto-columns: minmax(220px, 1fr);
    gap: 12px;
    overflow-x: auto;
    overflow-y: hidden;
    padding-bottom: 6px;
    scrollbar-width: thin;
    flex: 0 0 auto;
}

body[data-hmi-layout="projector"] .stage-body,
body[data-hmi-role="projector"] .stage-body {
    grid-template-columns: minmax(0, 1fr);
    grid-template-rows: minmax(0, 1fr);
    align-items: center;
    justify-items: center;
    gap: 0;
}

body[data-hmi-layout="landscape"] .rail-tabs,
body[data-hmi-layout="portrait"] .rail-tabs {
    display: none;
}

body[data-rail-density="compact"][data-hmi-layout="portrait"] .rail-tabs,
body[data-rail-density="compact"][data-hmi-layout="landscape"] .rail-tabs {
    display: grid;
}

body[data-hmi-layout="landscape"] .slide-preview,
body[data-hmi-layout="portrait"] .slide-preview {
    flex: 0 0 auto;
    width: var(--slide-frame-width, 100%);
    height: var(--slide-frame-height, auto);
    max-width: 100%;
    max-height: 100%;
    margin: 0 auto;
    align-self: center;
    aspect-ratio: var(--slide-aspect);
    padding: 12px;
}

body[data-hmi-layout="newspaper"] .slide-preview {
    flex: 0 0 auto;
    width: var(--slide-frame-width, 100%);
    height: var(--slide-frame-height, auto);
    max-width: 100%;
    max-height: 100%;
    margin: 0 auto;
    align-self: center;
    aspect-ratio: var(--slide-aspect);
    padding: 12px;
}

body[data-hmi-layout="projector"] .slide-preview,
body[data-hmi-role="projector"] .slide-preview {
    flex: 0 0 auto;
    width: var(--slide-frame-width, 100%);
    height: var(--slide-frame-height, auto);
    max-width: 100%;
    max-height: 100%;
    margin: 0 auto;
    align-self: center;
    --slide-aspect: 16 / 9;
    aspect-ratio: var(--slide-aspect);
}

body[data-hmi-layout="landscape"] .slide-preview {
    --slide-base-width: 1600px;
    --slide-base-height: 900px;
    --slide-aspect: 16 / 9;
}

body[data-hmi-layout="portrait"] .slide-preview {
    --slide-base-width: 1600px;
    --slide-base-height: 900px;
    --slide-aspect: 16 / 9;
}

body[data-hmi-layout="newspaper"] .slide-preview {
    --slide-base-width: 1600px;
    --slide-base-height: 900px;
    --slide-aspect: 16 / 9;
}

body[data-hmi-role="projector"] [data-projector-insights] {
    display: none;
}

body[data-hmi-layout="landscape"] .stage-rail {
    order: 0;
}

body[data-hmi-layout="landscape"] .slide-preview {
    order: 1;
}

body[data-hmi-layout="portrait"] .slide-preview {
    order: 0;
}

body[data-hmi-layout="portrait"] .stage-rail {
    order: 1;
}

body[data-rail-density="compact"][data-hmi-layout="portrait"] .stage-rail,
body[data-rail-density="compact"][data-hmi-layout="landscape"] .stage-rail {
    grid-auto-flow: row;
    grid-template-columns: minmax(0, 1fr);
    overflow-x: hidden;
}

body[data-rail-density="compact"][data-hmi-layout="portrait"] .stage-body,
body[data-rail-density="compact"][data-hmi-layout="landscape"] .stage-body {
    gap: 8px;
}

body[data-rail-density="compact"][data-hmi-layout="landscape"] .stage-rail {
    max-height: clamp(120px, 18vh, 180px);
    padding-bottom: 0;
    gap: 8px;
    overflow-y: auto;
}

body[data-rail-density="compact"][data-hmi-layout="landscape"] .stage-rail .rail-card {
    max-height: clamp(90px, 14vh, 130px);
    overflow: auto;
}

body[data-rail-density="compact"][data-hmi-layout="portrait"] .stage-rail {
    max-height: clamp(120px, 18vh, 220px);
    padding-bottom: 0;
    gap: 8px;
    overflow-y: auto;
}

body[data-rail-density="compact"][data-hmi-layout="portrait"] .stage-rail .rail-card {
    max-height: clamp(90px, 14vh, 140px);
    overflow: auto;
}

body[data-rail-density="compact"][data-hmi-layout="portrait"] .stage-rail .rail-card,
body[data-rail-density="compact"][data-hmi-layout="landscape"] .stage-rail .rail-card {
    display: none;
}

body[data-rail-density="compact"][data-hmi-layout="portrait"] .stage-rail .rail-card.rail-live,
body[data-rail-density="compact"][data-hmi-layout="portrait"] .stage-rail .rail-card.is-active,
body[data-rail-density="compact"][data-hmi-layout="landscape"] .stage-rail .rail-card.rail-live,
body[data-rail-density="compact"][data-hmi-layout="landscape"] .stage-rail .rail-card.is-active {
    display: grid;
}

body[data-hmi-layout="landscape"] .projector-insights,
body[data-hmi-layout="portrait"] .projector-insights {
    position: static;
    width: 100%;
    max-height: 30vh;
    overflow: hidden;
    order: 2;
}

body[data-hmi-layout="landscape"] .slide-list-panel,
body[data-hmi-layout="portrait"] .slide-list-panel,
body[data-hmi-layout="landscape"] .side-panel,
body[data-hmi-layout="portrait"] .side-panel {
    display: none;
}

body[data-hmi-layout="newspaper"] .slide-list-panel.is-hidden,
body[data-hmi-layout="newspaper"] .side-panel.is-hidden {
    display: none;
    visibility: hidden;
    width: 0;
    min-width: 0;
    max-width: 0;
    overflow: hidden;
}

.main-grid.layout-hide-list {
    grid-template-columns: 0 3fr 1fr;
}

.main-grid.layout-hide-side {
    grid-template-columns: 0.5fr 3fr 0;
}

.main-grid.layout-hide-list.layout-hide-side {
    grid-template-columns: 0 1fr 0;
}

.slide-list-panel.is-hidden,
.side-panel.is-hidden {
    visibility: hidden;
    pointer-events: none;
    width: 0;
    min-width: 0;
    max-width: 0;
    overflow: hidden;
}

body[data-hmi-layout="console"] .side-panel.is-hidden {
    display: none;
}

@media (max-width: 1100px) {
    body[data-hmi-layout="console"] {
        --mi-console-header-height: clamp(50px, 7vh, 64px);
        --mi-console-menu-height: clamp(28px, 5vh, 36px);
        --mi-console-carousel-height: clamp(72px, 11vh, 100px);
        --mi-console-agenda-height: clamp(26px, 5vh, 36px);
        --mi-console-stage-padding-x: 10px;
        --mi-console-stage-padding-y: 8px;
        --mi-console-carousel-padding-top: 6px;
        --mi-console-carousel-padding-bottom: 8px;
    }

    body[data-hmi-layout="console"] .menu-bar {
        background: linear-gradient(120deg, rgba(0, 147, 208, 0.15) 0%, rgba(0, 45, 98, 0.2) 100%);
        border-top: none;
        border-bottom: none;
        padding: 4px var(--mi-console-grid-padding-x);
    }

    body[data-hmi-layout="console"] .carousel-toolbar {
        gap: 6px;
    }

    body[data-hmi-layout="console"] .carousel-track {
        max-height: none;
        gap: 6px;
    }

    body[data-hmi-layout="console"] .carousel-item {
        min-width: 90px;
        padding: 4px 8px;
    }

    body:not([data-hmi-layout="console"]) .main-grid {
        grid-template-columns: 1fr;
    }
    body:not([data-hmi-layout="console"]) .slide-list-panel,
    body:not([data-hmi-layout="console"]) .side-panel {
        grid-column: 1 / -1;
        width: 100%;
    }
}

.slide-list-panel {
    display: grid;
    align-content: start;
    position: sticky;
    top: 84px;
    max-height: calc(100vh - 110px);
    overflow-y: auto;
    padding-right: 4px;
    width: 100%;
    min-width: 0;
    min-height: 0;
    scrollbar-width: none;
    -ms-overflow-style: none;
}

.slide-list-panel::-webkit-scrollbar {
    width: 0;
}

body[data-hmi-layout="console"] .slide-list-panel {
    display: none;
}

body[data-hmi-layout="console"] .main-grid.layout-hide-side {
    grid-template-columns: 1fr;
}

.slide-list {
    display: grid;
    gap: 10px;
}

.slide-list-item {
    border: 1px solid var(--mi-slide-item-border);
    background-color: var(--mi-slide-item-bg);
    background-image: var(--mi-card-shade);
    border-radius: 12px;
    padding: 10px 12px;
    text-align: left;
    cursor: pointer;
    font-family: inherit;
    border-left: 3px solid transparent;
}

.slide-list-item.is-active {
    border-color: var(--mi-slide-item-active-border);
    background: var(--mi-slide-item-active-bg);
    border-left-color: var(--mi-slide-item-active-border);
}

.slide-list-number {
    font-size: 11px;
    text-transform: uppercase;
    letter-spacing: 0.08em;
    color: var(--qi-blue-soft);
    margin-bottom: 6px;
}

.slide-list-title {
    font-size: 13px;
    color: var(--qi-text);
}

.deck-editor-input {
    width: 100%;
    min-height: 220px;
    border-radius: 10px;
    border: 1px solid var(--mi-border);
    background: #F7FAFC;
    font-family: var(--mi-font-mono);
    font-size: 12px;
    padding: 10px;
    color: var(--qi-text);
    resize: vertical;
}

.deck-editor-actions {
    display: grid;
    grid-template-columns: 1fr;
    gap: 8px;
    margin-top: 10px;
}

.deck-editor-button {
    border: 1px solid #CBD5E1;
    background: #FFFFFF;
    color: var(--qi-blue);
    padding: 8px 12px;
    border-radius: 10px;
    font-size: 12px;
    cursor: pointer;
    text-transform: uppercase;
    letter-spacing: 0.08em;
    font-family: var(--mi-font-display);
}

.deck-editor-button.primary {
    background: var(--qi-blue);
    color: #FFFFFF;
    border-color: var(--qi-blue);
}

.deck-editor-button.ghost {
    background: var(--mi-sand);
    border-color: var(--mi-sand);
    color: var(--qi-blue-soft);
}

.settings-shell {
    padding: 18px 22px 26px;
    display: grid;
    gap: 18px;
    grid-template-columns: minmax(220px, 280px) minmax(0, 1fr);
    align-items: start;
    min-width: 0;
    min-height: 0;
}

.settings-content {
    display: grid;
    gap: 16px;
    min-width: 0;
    min-height: 0;
}

.settings-nav {
    position: sticky;
    top: 16px;
    align-self: start;
    display: grid;
    gap: 12px;
    min-width: 0;
    min-height: 0;
}

.settings-nav-card {
    display: grid;
    gap: 8px;
}

.settings-nav-link {
    display: inline-flex;
    align-items: center;
    gap: 8px;
    padding: 8px 10px;
    border-radius: 10px;
    border: 1px solid var(--mi-card-border);
    background: var(--mi-card-bg);
    color: var(--mi-menu-text-strong);
    font-weight: 600;
    font-size: 13px;
    text-decoration: none;
}

.settings-nav-link:hover,
.settings-nav-link:focus-visible {
    border-color: var(--qi-blue);
    background: var(--qi-bg-muted);
    outline: none;
}

.settings-nav-badge {
    width: 18px;
    height: 18px;
    border-radius: 6px;
    display: inline-block;
    object-fit: contain;
}

.settings-card-header {
    display: flex;
    align-items: flex-start;
    gap: 14px;
    margin-bottom: 8px;
}

.settings-card-icon {
    width: 42px;
    height: 42px;
    border-radius: 12px;
    border: 1px solid var(--mi-card-border);
    background: #FFFFFF;
    padding: 6px;
    object-fit: contain;
    flex: 0 0 auto;
}

.settings-card-title h2 {
    margin: 0;
}

.settings-card-title .panel-text-muted {
    margin: 4px 0 0;
}

.settings-grid {
    display: grid;
    gap: 16px;
    grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
    min-width: 0;
}

.settings-row {
    display: flex;
    flex-wrap: wrap;
    gap: 12px;
    align-items: center;
}

.settings-note {
    margin: 6px 0 0 0;
    font-size: 13px;
    color: var(--qi-text-soft);
    line-height: 1.4;
}

.settings-code {
    background: #F7FAFC;
    border: 1px solid var(--mi-border);
    border-radius: 12px;
    padding: 12px;
    font-size: 13px;
    color: var(--qi-text);
    font-family: var(--mi-font-mono);
    white-space: pre-wrap;
    line-height: 1.4;
}

.stage {
    background: var(--mi-stage-bg);
    border: 1px solid var(--mi-stage-border);
    border-radius: 18px;
    padding: 20px 22px;
    flex: 1 1 auto;
    min-height: 0;
    min-width: 0;
    display: flex;
    flex-direction: column;
    gap: 16px;
    animation: rise-in 0.6s ease;
    position: relative;
    overflow: hidden;
    background-image:
        linear-gradient(140deg, rgba(var(--mi-blue-rgb), 0.08), rgba(var(--mi-navy-rgb), 0.02) 55%, transparent 70%),
        linear-gradient(0deg, #FFFFFF, #FFFFFF);
    flex: 1 1 auto;
    height: 100%;
    min-height: 0;
    align-items: stretch;
    max-width: 1440px;
    margin: 0 auto;
}

body[data-hmi-layout="console"] .stage {
    padding: var(--mi-console-stage-padding-y) var(--mi-console-stage-padding-x);
    max-width: none;
    width: 100%;
    height: 100%;
    min-height: 0;
    margin: 0;
    padding-bottom: calc(var(--mi-console-stage-padding-y) + 36px);
    align-self: stretch;
}

body[data-hmi-layout="console"][data-hmi-compact="true"] .stage {
    padding-bottom: var(--mi-console-stage-padding-y);
}

.stage-body {
    display: grid;
    grid-template-columns: minmax(0, 1fr) minmax(240px, 300px);
    gap: 14px;
    align-items: start;
    flex: 1;
    min-height: 0;
    min-width: 0;
    overflow: hidden;
}

body[data-hmi-layout="console"] .stage-body {
    grid-template-columns: minmax(0, 1fr) minmax(240px, 320px);
    grid-template-rows: minmax(0, 1fr);
    gap: 12px;
    align-items: stretch;
    height: 100%;
    min-height: 0;
}

body[data-hmi-layout="newspaper"] .stage-body {
    grid-template-columns: minmax(0, 1fr);
    gap: 12px;
}

body[data-hmi-layout="newspaper"] .stage-rail {
    display: none;
}

.stage-body.rail-collapsed {
    grid-template-columns: minmax(0, 1fr);
}

.stage-body.rail-collapsed .stage-rail {
    display: none;
}

.stage-rail {
    display: grid;
    gap: 12px;
    align-content: start;
    min-width: 0;
    min-height: 0;
    overflow-y: auto;
}

.rail-tabs {
    display: none;
    gap: 8px;
    grid-template-columns: repeat(auto-fit, minmax(80px, 1fr));
}

body[data-hmi-layout="console"] .rail-tabs {
    display: grid;
}

.rail-tab {
    border: 1px solid rgba(0, 147, 208, 0.35);
    background: rgba(255, 255, 255, 0.08);
    color: #D6ECFA;
    padding: 6px 10px;
    border-radius: 999px;
    font-size: 11px;
    text-transform: uppercase;
    letter-spacing: 0.08em;
    font-family: var(--mi-font-display);
    cursor: pointer;
}

body[data-rail-density="compact"] .rail-tabs {
    gap: 6px;
}

body[data-rail-density="compact"] .rail-tab {
    padding: 5px 8px;
    font-size: 10px;
}

.rail-tab.is-active {
    background: rgba(0, 147, 208, 0.2);
    border-color: rgba(0, 147, 208, 0.6);
    color: #F2FBFF;
}

.rail-card {
    border-radius: 14px;
    border: 1px solid var(--mi-card-border);
    background: rgba(255, 255, 255, 0.96);
    padding: 12px;
    display: grid;
    gap: 8px;
    box-shadow: 0 10px 24px rgba(0, 45, 98, 0.08);
}

body[data-rail-density="compact"] .rail-card {
    padding: 8px;
    gap: 6px;
}

.rail-card.is-hidden {
    display: none;
}

.rail-title {
    font-family: var(--mi-font-display);
    font-size: 12px;
    text-transform: uppercase;
    letter-spacing: 0.08em;
    color: var(--qi-blue);
}

body[data-rail-density="compact"] .rail-title {
    font-size: 11px;
}

.rail-next-body {
    font-size: 13px;
    color: var(--qi-text);
}

.rail-text {
    font-size: 12px;
    color: var(--qi-text-soft);
    margin: 0;
}

body[data-rail-density="compact"] .rail-next-body,
body[data-rail-density="compact"] .rail-text,
body[data-rail-density="compact"] .rail-list {
    font-size: 11px;
}

.rail-list {
    margin: 0;
    padding-left: 18px;
    display: grid;
    gap: 6px;
    font-size: 12px;
    color: var(--qi-text);
}

.workflow-list {
    list-style: none;
    margin: 0;
    padding: 0;
    display: grid;
    gap: 6px;
}

.workflow-item {
    display: grid;
    gap: 4px;
    padding: 6px 8px;
    border-radius: 10px;
    border: 1px solid var(--mi-card-border);
    background: rgba(255, 255, 255, 0.9);
}

.workflow-item.is-complete {
    border-color: var(--qi-blue);
    background: rgba(0, 147, 208, 0.08);
}

.workflow-label {
    font-size: 11px;
    font-weight: 600;
    color: var(--qi-text);
}

.workflow-meta {
    font-size: 10px;
    color: var(--qi-text-soft);
}

.workflow-actions {
    display: grid;
    gap: 6px;
}

.rail-tool-grid {
    display: grid;
    gap: 6px;
}

.rail-link {
    display: inline-flex;
    align-items: center;
    justify-content: flex-start;
    gap: 8px;
    padding: 6px 10px;
    border-radius: 8px;
    border: 1px solid var(--mi-card-border);
    background: rgba(255, 255, 255, 0.92);
    color: var(--qi-text);
    text-decoration: none;
    font-size: 11px;
    text-transform: uppercase;
    letter-spacing: 0.06em;
    font-family: var(--mi-font-display);
    transition: background 0.2s ease, border-color 0.2s ease;
}

.rail-link-badge {
    width: 18px;
    height: 18px;
    border-radius: 6px;
    display: inline-block;
    object-fit: contain;
}

.rail-action {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    padding: 6px 10px;
    border-radius: 8px;
    border: 1px solid var(--mi-card-border);
    background: rgba(255, 255, 255, 0.92);
    color: var(--qi-text);
    font-size: 11px;
    text-transform: uppercase;
    letter-spacing: 0.06em;
    font-family: var(--mi-font-display);
    cursor: pointer;
    transition: background 0.2s ease, border-color 0.2s ease;
}

.rail-link:hover,
.rail-link:focus-visible {
    background: var(--qi-bg-muted);
    border-color: var(--qi-blue);
    outline: none;
}

.rail-action:hover,
.rail-action:focus-visible {
    background: var(--qi-bg-muted);
    border-color: var(--qi-blue);
    outline: none;
}

body[data-hmi-layout="console"] .rail-card {
    background: rgba(10, 22, 36, 0.92);
    border-color: rgba(0, 147, 208, 0.2);
    color: #EAF6FF;
    padding: 8px;
    gap: 6px;
}

body[data-hmi-layout="console"] .rail-title {
    color: #9CCAF1;
    font-size: 11px;
}

body[data-hmi-layout="console"] .rail-text,
body[data-hmi-layout="console"] .rail-next-body,
body[data-hmi-layout="console"] .rail-list {
    color: rgba(219, 234, 247, 0.92);
    font-size: 11px;
}

body[data-hmi-layout="console"] .workflow-item {
    border-color: rgba(0, 147, 208, 0.35);
    background: rgba(255, 255, 255, 0.06);
}

body[data-hmi-layout="console"] .workflow-item.is-complete {
    border-color: rgba(0, 147, 208, 0.7);
    background: rgba(0, 147, 208, 0.18);
}

body[data-hmi-layout="console"] .workflow-label {
    color: rgba(214, 236, 250, 0.95);
    font-size: 11px;
}

body[data-hmi-layout="console"] .workflow-meta {
    color: rgba(214, 236, 250, 0.7);
    font-size: 11px;
}

body[data-hmi-layout="console"] .rail-card .panel-subtitle {
    color: rgba(156, 202, 241, 0.85);
}

body[data-hmi-layout="console"] .rail-card .status-live-chip {
    background: rgba(255, 255, 255, 0.08);
    color: #D6ECFA;
    padding: 2px 6px;
    font-size: 10px;
}

body[data-hmi-layout="console"] .rail-card .live-toggle {
    background: rgba(255, 255, 255, 0.08);
    border-color: rgba(0, 147, 208, 0.45);
    color: #CFEFFF;
}

body[data-hmi-layout="console"] .rail-link {
    background: rgba(255, 255, 255, 0.08);
    color: #EAF6FF;
    border-color: rgba(0, 147, 208, 0.35);
    padding: 5px 8px;
    font-size: 10px;
}

body[data-hmi-layout="console"] .rail-link-badge {
    width: 18px;
    height: 18px;
}

body[data-hmi-layout="console"] .rail-action {
    background: rgba(255, 255, 255, 0.08);
    color: #EAF6FF;
    border-color: rgba(0, 147, 208, 0.35);
    padding: 5px 8px;
    font-size: 10px;
}

body[data-hmi-layout="console"] .rail-link:hover,
body[data-hmi-layout="console"] .rail-link:focus-visible {
    background: rgba(0, 147, 208, 0.18);
    border-color: rgba(0, 147, 208, 0.6);
}

body[data-hmi-layout="console"] .rail-action:hover,
body[data-hmi-layout="console"] .rail-action:focus-visible {
    background: rgba(0, 147, 208, 0.18);
    border-color: rgba(0, 147, 208, 0.6);
}

body[data-hmi-layout="console"] .stage-rail {
    gap: 6px;
}

body[data-hmi-layout="console"] .stage-rail .rail-card {
    display: none;
}

body[data-hmi-layout="console"] .stage-rail .rail-card.rail-live,
body[data-hmi-layout="console"] .stage-rail .rail-card.is-active {
    display: grid;
}

.presenter-panel {
    border: 1px solid var(--mi-stage-border);
    border-radius: 18px;
    background: var(--mi-bg);
    padding: 20px;
    display: none;
    flex-direction: column;
    gap: 12px;
    box-shadow: 0 12px 28px rgba(0, 45, 98, 0.08);
    min-width: 0;
    min-height: 0;
}

.presenter-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    flex-wrap: wrap;
    gap: 12px;
}

.presenter-title {
    font-family: var(--mi-font-display);
    font-size: clamp(20px, 2.3vw, 28px);
    text-transform: uppercase;
    color: var(--qi-blue);
}

.presenter-live {
    display: flex;
    gap: 16px;
    font-size: 13px;
    color: var(--qi-text-soft);
    flex-wrap: wrap;
}

.presenter-pace,
.presenter-audience {
    text-transform: uppercase;
    letter-spacing: 0.08em;
}

.presenter-pace[data-pace-state="ahead"] {
    color: #16a34a;
}

.presenter-pace[data-pace-state="on-track"] {
    color: #0ea5e9;
}

.presenter-pace[data-pace-state="behind"] {
    color: #ef4444;
}

.presenter-notes {
    background: rgba(255, 255, 255, 0.85);
    border-radius: 12px;
    padding: 12px 14px;
    border: 1px solid rgba(0, 45, 98, 0.08);
    font-size: 15px;
    line-height: 1.6;
    color: var(--qi-text);
}

.presenter-next {
    background: rgba(0, 147, 208, 0.08);
    border-radius: 10px;
    padding: 10px 14px;
    border: 1px solid rgba(0, 147, 208, 0.3);
    font-size: 14px;
}

.presenter-next strong {
    display: block;
    margin-bottom: 6px;
    color: var(--qi-blue);
}

.presenter-body {
    display: grid;
    gap: 12px;
    min-width: 0;
    min-height: 0;
}

body[data-hmi-layout="newspaper"] .presenter-notes {
    column-count: 2;
    column-gap: 18px;
}

body[data-hmi-layout="newspaper"] .presenter-notes > * {
    break-inside: avoid;
}

.presenter-insights {
    border-radius: 14px;
    border: 1px solid rgba(0, 45, 98, 0.12);
    background: rgba(255, 255, 255, 0.92);
    padding: 12px;
    display: grid;
    gap: 12px;
}

.presenter-insights-header {
    font-size: 12px;
    text-transform: uppercase;
    letter-spacing: 0.12em;
    color: var(--qi-blue);
    font-family: var(--mi-font-display);
}

.presenter-insights-grid {
    display: grid;
    gap: 10px;
    grid-template-columns: repeat(2, minmax(0, 1fr));
    min-width: 0;
    min-height: 0;
}

@media (max-width: 1100px) {
    .presenter-insights-grid {
        grid-template-columns: minmax(0, 1fr);
    }
}

.insight-card {
    border-radius: 12px;
    border: 1px solid var(--mi-preview-inner-border);
    background: #FFFFFF;
    padding: 10px;
    display: grid;
    gap: 8px;
    min-height: 120px;
}

.insight-card-wide {
    grid-column: 1 / -1;
}

.insight-title {
    font-size: 12px;
    text-transform: uppercase;
    letter-spacing: 0.08em;
    color: var(--qi-text-soft);
    font-family: var(--mi-font-display);
}

.insight-chart {
    min-height: 120px;
}

.presenter-insights-status {
    font-size: 12px;
    color: var(--qi-text-soft);
}

.sparkline-grid {
    display: grid;
    gap: 8px;
    grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
}

.sparkline-card {
    border-radius: 10px;
    border: 1px solid rgba(0, 45, 98, 0.1);
    background: rgba(248, 251, 255, 0.9);
    padding: 8px;
    display: grid;
    gap: 6px;
}

.sparkline-title {
    font-size: 11px;
    text-transform: uppercase;
    letter-spacing: 0.08em;
    color: var(--qi-blue-soft);
    font-family: var(--mi-font-display);
}

.sparkline-chart {
    min-height: 80px;
}

body[data-hmi-view="presenter"] .presenter-panel {
    display: flex;
}

body[data-hmi-view="presenter"] .slide-list-panel,
body[data-hmi-view="presenter"] .side-panel,
body[data-hmi-view="presenter"] .menu-bar,
body[data-hmi-view="presenter"] .status-bar {
    display: none;
}

body[data-hmi-view="presenter"][data-hmi-layout="newspaper"] .slide-list-panel,
body[data-hmi-view="presenter"][data-hmi-layout="newspaper"] .side-panel {
    display: block;
}

.stage-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    gap: 12px;
    flex-wrap: wrap;
    font-size: 13px;
    color: var(--qi-text-soft);
    text-transform: uppercase;
    letter-spacing: 0.08em;
}

body[data-hmi-layout="portrait"] .stage-header {
    display: none;
}

.act-pill {
    padding: 4px 10px;
    border-radius: 999px;
    border: 1px solid var(--mi-slide-item-border);
    background: var(--mi-slide-item-bg);
    color: var(--qi-blue);
    font-size: 11px;
    letter-spacing: 0.12em;
    text-transform: uppercase;
    font-family: var(--mi-font-display);
}

.slide-preview {
    flex: 1 1 auto;
    width: 100%;
    height: 100%;
    --slide-content-scale: 1;
    --slide-base-width: 1600px;
    --slide-base-height: 900px;
    --slide-body-max: 220px;
    --slide-note-max: 200px;
    --slide-body-lines: 5;
    --slide-note-lines: 6;
    border-radius: 12px;
    border: 1px solid var(--mi-preview-border);
    background: var(--mi-preview-bg);
    padding: 20px;
    display: flex;
    align-items: center;
    justify-content: center;
    aspect-ratio: auto;
    min-height: 0;
    min-width: 0;
    max-height: none;
    box-shadow: 0 18px 40px rgba(0, 45, 98, 0.08);
    overflow: hidden;
}

body[data-hmi-view="control"][data-slide-clamp="media"] .slide-preview {
    --slide-body-max: clamp(160px, 20vh, 200px);
    --slide-note-max: clamp(140px, 18vh, 180px);
    --slide-body-lines: 4;
    --slide-note-lines: 4;
}

body[data-hmi-view="control"][data-slide-clamp="media"] .slide-preview-media {
    min-height: clamp(180px, 30vh, 280px);
}

body[data-hmi-view="control"][data-slide-clamp="photo_map"] .slide-preview {
    --slide-body-max: clamp(140px, 18vh, 180px);
    --slide-note-max: clamp(140px, 18vh, 180px);
    --slide-body-lines: 3;
    --slide-note-lines: 3;
}

body[data-hmi-view="control"][data-slide-clamp="photo_map"] .slide-preview-media {
    min-height: clamp(220px, 34vh, 320px);
}

body[data-hmi-view="control"][data-slide-clamp="agenda"] .slide-preview {
    --slide-body-max: clamp(260px, 32vh, 360px);
    --slide-note-max: clamp(200px, 24vh, 280px);
    --slide-body-lines: 8;
    --slide-note-lines: 6;
}

body[data-hmi-view="control"][data-slide-clamp="agenda"] .slide-preview-media {
    min-height: clamp(100px, 14vh, 160px);
}

body[data-hmi-view="control"][data-slide-clamp="poll"] .slide-preview {
    --slide-body-max: clamp(180px, 20vh, 240px);
    --slide-note-max: clamp(160px, 18vh, 220px);
    --slide-body-lines: 4;
    --slide-note-lines: 4;
}

body[data-hmi-view="control"][data-slide-clamp="poll"] .slide-preview-media {
    min-height: clamp(100px, 14vh, 160px);
}

body[data-hmi-view="control"][data-slide-clamp="notes"] .slide-preview {
    --slide-body-max: clamp(240px, 28vh, 320px);
    --slide-note-max: clamp(240px, 28vh, 320px);
    --slide-body-lines: 7;
    --slide-note-lines: 8;
}

body[data-hmi-view="control"][data-slide-clamp="notes"] .slide-preview-media {
    min-height: clamp(120px, 18vh, 180px);
}

body[data-hmi-layout="console"] .slide-preview {
    padding: 14px;
    width: 100%;
    height: 100%;
    min-height: 0;
    max-height: none;
    aspect-ratio: auto;
    max-width: 100%;
    margin: 0;
    align-self: stretch;
}

body[data-hmi-layout="console"][data-hmi-tall="true"] .slide-preview {
    max-height: 100%;
    aspect-ratio: auto;
}

body[data-content-density="compact"] .slide-preview {
    padding: 12px;
}

body[data-content-density="compact"] {
    --mi-console-grid-gap: 10px;
    --mi-console-grid-padding-x: 12px;
    --mi-console-grid-padding-y: 8px;
    --mi-console-stage-padding-x: 10px;
    --mi-console-stage-padding-y: 8px;
}

body[data-content-density="compact"]:not([data-hmi-layout="console"]) .main-grid {
    padding-top: 14px;
    padding-bottom: 14px;
    gap: 14px;
}

body[data-content-density="compact"]:not([data-hmi-layout="console"]) .stage {
    padding: 16px 18px;
    gap: 12px;
}

body[data-content-density="compact"] .stage-rail {
    gap: 10px;
}

body[data-content-density="compact"] .rail-card {
    padding: 10px;
    gap: 6px;
}

body[data-content-density="compact"] .presenter-panel {
    padding: 16px;
    gap: 10px;
}

body[data-content-density="compact"] .presenter-body {
    gap: 10px;
}

body[data-content-density="compact"] .presenter-insights {
    padding: 10px;
    gap: 10px;
}

body[data-content-density="compact"] .presenter-insights-grid {
    gap: 10px;
    grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
}

body[data-content-density="compact"] .insight-card {
    padding: 8px;
    min-height: 120px;
}

body[data-content-density="compact"] .insight-chart {
    min-height: 120px;
}

body[data-content-density="compact"] .sparkline-grid {
    gap: 6px;
    grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
}

body[data-content-density="compact"] .sparkline-card {
    padding: 6px;
    gap: 4px;
}

.slide-preview-inner {
    width: var(--slide-base-width);
    height: var(--slide-base-height);
    flex: 0 0 auto;
    border-radius: 10px;
    border: 1px dashed var(--mi-preview-inner-border);
    display: flex;
    flex-direction: column;
    align-items: stretch;
    justify-content: space-between;
    padding: 20px;
    position: relative;
    overflow: hidden;
    transform: scale(var(--slide-content-scale, 1));
    transform-origin: top center;
    max-width: 100%;
    max-height: 100%;
    min-width: 0;
    min-height: 0;
    background:
        linear-gradient(180deg, #FFFFFF 0%, #F7FAFC 100%),
        radial-gradient(circle at 18% 10%, rgba(var(--mi-blue-rgb), 0.08), transparent 42%),
        repeating-linear-gradient(90deg, rgba(var(--mi-navy-rgb), 0.03) 0, rgba(var(--mi-navy-rgb), 0.03) 1px, transparent 1px, transparent 48px);
    gap: 10px;
    min-height: 0;
}

body[data-hmi-layout="console"] .slide-preview-inner {
    padding: 14px;
    gap: 8px;
    min-height: 0;
}

.slide-preview-grid {
    display: grid;
    grid-template-columns: minmax(0, 1fr) minmax(200px, 260px);
    gap: 16px;
    height: 100%;
    min-height: 0;
    min-width: 0;
    overflow: hidden;
}

body[data-hmi-layout="console"] .slide-preview-grid {
    grid-template-columns: minmax(0, 1fr) minmax(180px, 240px);
    gap: 12px;
}

.slide-preview[data-aside-visible="false"] .slide-preview-grid {
    grid-template-columns: minmax(0, 1fr);
}

.slide-preview[data-aside-placement="bottom"] .slide-preview-grid {
    grid-template-columns: minmax(0, 1fr);
    grid-template-rows: minmax(0, auto) minmax(0, auto);
}

.slide-preview-main {
    display: flex;
    flex-direction: column;
    gap: 10px;
    min-height: 0;
    min-width: 0;
}

.slide-preview-aside {
    display: grid;
    gap: 10px;
    align-content: start;
    padding: 12px;
    border-radius: 10px;
    border: 1px solid var(--mi-preview-inner-border);
    background: rgba(255, 255, 255, 0.9);
    min-width: 0;
    min-height: 0;
    overflow: hidden;
}

body[data-hmi-layout="console"] .slide-preview-aside {
    padding: 10px;
    background: rgba(255, 255, 255, 0.94);
}

.slide-preview-aside-charts {
    display: grid;
    gap: 8px;
}

.slide-preview[data-aside-placement="bottom"] .slide-preview-aside-charts {
    grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
}

.slide-preview-aside-card {
    border-radius: 10px;
    border: 1px solid var(--mi-preview-inner-border);
    background: rgba(255, 255, 255, 0.96);
    padding: 8px;
    display: grid;
    gap: 6px;
}

.slide-preview-aside-chart {
    min-height: 120px;
}

body[data-hmi-layout="console"] .slide-preview-aside-card {
    padding: 6px;
}

body[data-hmi-layout="console"] .slide-preview-aside-chart {
    min-height: 110px;
}

.slide-preview-aside-title {
    font-size: 12px;
    text-transform: uppercase;
    letter-spacing: 0.08em;
    color: var(--qi-blue);
    font-family: var(--mi-font-display);
}

body[data-content-density="compact"] .slide-preview-inner {
    padding: 12px;
    gap: 6px;
}

body[data-content-density="compact"] .slide-preview-title {
    font-size: clamp(24px, 2.2vw, 36px);
    margin: 10px 0 6px 0;
}

body[data-content-density="compact"] .slide-preview-body {
    font-size: 15px;
    padding: 8px 10px;
    line-height: 1.3;
    display: -webkit-box;
    -webkit-line-clamp: 3;
    -webkit-box-orient: vertical;
    overflow: hidden;
}

body[data-content-density="compact"] .slide-preview-note {
    margin-top: 8px;
    font-size: 13px;
    padding: 6px 8px;
    display: -webkit-box;
    -webkit-line-clamp: 4;
    -webkit-box-orient: vertical;
    overflow: hidden;
}

body[data-content-density="compact"] .slide-preview-note p {
    margin: 0 0 4px;
}

body[data-content-density="compact"] .slide-preview-note li {
    margin-bottom: 4px;
}

body[data-content-density="compact"] .slide-preview-list {
    gap: 6px;
    font-size: 14px;
}

body[data-content-density="compact"] .slide-preview-list li {
    line-height: 1.2;
}

body[data-content-density="relaxed"] .slide-preview {
    padding: 22px;
}

body[data-hmi-cramped="true"] .stage-header,
body[data-hmi-cramped="true"] .stage-footer {
    display: none;
}

body[data-hmi-cramped="true"] .stage {
    padding-top: 16px;
    padding-bottom: 16px;
}

body[data-hmi-narrow="true"] .stage-body {
    grid-template-columns: minmax(0, 1fr);
}

body[data-hmi-narrow="true"] .stage-rail {
    display: none;
}

body[data-hmi-cramped="true"] .presenter-insights {
    display: none;
}

body[data-hmi-view="fullscreen"] .projector-insights {
    position: absolute;
    right: 24px;
    bottom: 24px;
    width: min(440px, 36vw);
    max-height: 42vh;
    overflow: hidden;
    box-shadow: 0 16px 34px rgba(0, 0, 0, 0.25);
    backdrop-filter: blur(6px);
}

body[data-hmi-cramped="true"] .projector-insights {
    display: none;
}

body[data-hmi-layout="console"][data-hmi-cramped="true"] {
    --mi-console-agenda-height: 0px;
}

body[data-hmi-layout="console"][data-hmi-cramped="true"] .agenda-row {
    display: none;
}

body[data-content-density="relaxed"] .slide-preview-inner {
    padding: 22px;
    gap: 12px;
}

body[data-content-density="relaxed"] .slide-preview-title {
    font-size: clamp(32px, 3vw, 48px);
    margin: 18px 0 10px 0;
}

body[data-content-density="relaxed"] .slide-preview-body {
    font-size: 19px;
    padding: 12px 14px;
}

body[data-content-density="relaxed"] .slide-preview-note {
    font-size: 16px;
    padding: 10px 12px;
}

.slide-preview-inner::before {
    content: "";
    position: absolute;
    left: 20px;
    top: 18px;
    width: 84px;
    height: 6px;
    border-radius: 999px;
    background: linear-gradient(90deg, var(--qi-blue), #6fd3ff);
    box-shadow: 0 6px 14px rgba(0, 147, 208, 0.24);
}

.slide-preview-stretch {
    flex: 1 1 auto;
    min-height: 0;
    width: 100%;
}

body[data-hmi-media-hidden="true"] [data-slide-media] {
    display: none;
}

body[data-hmi-chart-hidden="true"] [data-slide-chart] {
    display: none;
}

.slide-preview-title {
    font-size: clamp(30px, 2.8vw, 44px);
    color: var(--qi-blue);
    margin: 16px 0 8px 0;
    font-family: var(--mi-font-display);
    text-transform: uppercase;
    letter-spacing: 0.06em;
    text-shadow: var(--mi-title-shadow);
}

body[data-hmi-layout="portrait"] .slide-preview-title {
    font-size: clamp(24px, 4.4vw, 38px);
    line-height: 1.1;
    margin: 10px 0 6px 0;
    letter-spacing: 0.04em;
}

body[data-hmi-layout="portrait"] .slide-preview-body,
body[data-hmi-layout="portrait"] .slide-preview-note {
    line-height: 1.45;
}

body[data-hmi-layout="portrait"][data-hmi-view="control"] .slide-preview-body,
body[data-hmi-layout="portrait"][data-hmi-view="control"] .slide-preview-note {
    max-height: none;
    -webkit-line-clamp: unset;
}

body[data-hmi-layout="portrait"] .slide-preview-note h1,
body[data-hmi-layout="portrait"] .slide-preview-note h2,
body[data-hmi-layout="portrait"] .slide-preview-note h3 {
    font-size: 14px;
}

.slide-focus-tag {
    align-self: flex-start;
    border-radius: 999px;
    padding: 6px 12px;
    font-size: 12px;
    font-family: var(--mi-font-display);
    text-transform: none;
    letter-spacing: 0.02em;
    color: var(--qi-blue);
    border: 1px solid rgba(0, 45, 98, 0.16);
    background: linear-gradient(90deg, rgba(0, 147, 208, 0.14), rgba(255, 255, 255, 0.92));
    box-shadow: 0 6px 14px rgba(0, 45, 98, 0.08);
    margin-bottom: 10px;
}

.slide-preview-body {
    font-size: 18px;
    color: var(--qi-text-soft);
    max-width: 100%;
    background: rgba(255, 255, 255, 0.84);
    border-radius: 10px;
    padding: 10px 12px;
    border: 1px solid rgba(0, 45, 98, 0.08);
}

.slide-preview-note {
    margin-top: 12px;
    font-size: 15px;
    color: var(--qi-blue-soft);
    background: rgba(0, 147, 208, 0.08);
    border-radius: 10px;
    padding: 8px 10px;
}

body[data-hmi-layout="landscape"] .slide-preview-body,
body[data-hmi-layout="portrait"] .slide-preview-body,
body[data-hmi-layout="landscape"] .slide-preview-note,
body[data-hmi-layout="portrait"] .slide-preview-note {
    background: transparent;
    border: none;
    padding: 0;
    box-shadow: none;
}

body[data-hmi-layout="landscape"] .slide-preview-note,
body[data-hmi-layout="portrait"] .slide-preview-note {
    margin-top: 8px;
}

body[data-hmi-view="control"] .slide-preview-main {
    overflow: hidden;
}

body[data-hmi-layout="newspaper"][data-hmi-view="control"] .slide-preview-main {
    overflow: visible;
}

body[data-hmi-view="control"] .slide-preview-media {
    min-height: clamp(140px, 24vh, 220px);
}

body[data-hmi-view="control"] .slide-preview-body,
body[data-hmi-view="control"] .slide-preview-note {
    min-height: 0;
    max-height: var(--slide-body-max);
    display: -webkit-box;
    -webkit-box-orient: vertical;
    -webkit-line-clamp: var(--slide-body-lines);
    overflow: hidden;
}

body[data-hmi-layout="newspaper"][data-hmi-view="control"] .slide-preview-body,
body[data-hmi-layout="newspaper"][data-hmi-view="control"] .slide-preview-note {
    max-height: none;
    -webkit-line-clamp: unset;
    display: block;
    overflow: visible;
}

body[data-hmi-layout="newspaper"][data-hmi-view="control"] .slide-preview-inner {
    overflow: hidden;
}

body[data-hmi-layout="newspaper"][data-hmi-view="control"] .slide-preview-list {
    line-height: 1.6;
}

body[data-hmi-layout="newspaper"][data-hmi-view="control"] .slide-preview-list li {
    padding: 2px 0;
}

body[data-hmi-view="control"] .slide-preview-note {
    max-height: var(--slide-note-max);
    -webkit-line-clamp: var(--slide-note-lines);
}
.slide-preview-note h1,
.slide-preview-note h2,
.slide-preview-note h3 {
    margin: 0 0 6px;
    font-size: 16px;
    color: var(--qi-blue);
    font-family: var(--mi-font-display);
    text-transform: none;
    letter-spacing: 0.02em;
}
.slide-preview-note p {
    margin: 0 0 6px;
}
.slide-preview-note ul {
    margin: 6px 0 0 18px;
    padding: 0;
}
.slide-preview-note li {
    margin-bottom: 6px;
}

.slide-qa {
    background: rgba(255, 255, 255, 0.92);
    border: 1px solid rgba(0, 45, 98, 0.12);
    border-radius: 12px;
    padding: 12px 14px;
    display: flex;
    flex-direction: column;
    gap: 8px;
    box-shadow: 0 8px 18px rgba(0, 45, 98, 0.08);
}
.qa-prompt {
    font-weight: 600;
    color: var(--qi-blue);
    font-family: var(--mi-font-display);
}
.qa-options {
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
}
.qa-option {
    flex: 1 1 auto;
    border: 1px solid rgba(0, 45, 98, 0.2);
    border-radius: 999px;
    padding: 6px 14px;
    background: #FFFFFF;
    color: var(--qi-text);
    font-size: 13px;
    cursor: pointer;
    display: flex;
    flex-direction: column;
    align-items: flex-start;
    transition: background 0.25s ease, border-color 0.25s ease;
}
.qa-option.is-selected {
    background: rgba(var(--mi-blue-rgb), 0.12);
    border-color: var(--qi-blue);
}
.qa-option-detail {
    font-size: 11px;
    color: var(--qi-text-soft);
    margin-top: 4px;
}

.slide-preview-list {
    margin: 0;
    padding-left: 22px;
    color: var(--qi-text);
    font-size: 16px;
    display: grid;
    gap: 8px;
    width: 100%;
}

.slide-preview-list li {
    line-height: 1.5;
    list-style: disc;
    background: transparent;
    border-radius: 0;
    padding: 0;
    border: none;
    box-shadow: none;
}

.slide-preview-media {
    width: 100%;
    display: grid;
    grid-template-rows: auto 1fr auto;
    gap: 10px;
    padding: 12px;
    border-radius: 12px;
    border: 1px solid rgba(0, 45, 98, 0.08);
    background: rgba(255, 255, 255, 0.7);
    flex: 1 1 auto;
    order: var(--slide-media-order, 3);
    min-height: clamp(160px, 30vh, 260px);
    align-items: stretch;
    min-width: 0;
}

body[data-hmi-layout="portrait"] .slide-preview-media {
    min-height: clamp(220px, 34vh, 420px);
    padding: 6px;
    gap: 8px;
    grid-template-rows: minmax(0, 1fr) auto;
}

body[data-hmi-layout="landscape"] .slide-preview-media {
    min-height: clamp(200px, 28vh, 340px);
    padding: 10px;
}

body[data-hmi-layout="portrait"] .slide-preview-inner {
    padding: 10px;
    gap: 10px;
}

body[data-hmi-layout="landscape"] .slide-preview-inner {
    padding: 12px;
    gap: 10px;
}

body[data-hmi-layout="portrait"] .slide-preview-media video,
body[data-hmi-layout="portrait"] .slide-preview-media img {
    height: auto;
    max-height: none;
}

.slide-media-link {
    display: block;
    border-radius: 12px;
    overflow: hidden;
    border: 1px solid transparent;
}

.slide-media-link img {
    width: 100%;
    height: 100%;
    object-fit: contain;
    display: block;
}

.media-lightbox-button {
    align-self: flex-start;
    margin-top: 10px;
    padding: 8px 16px;
    border-radius: 999px;
    border: 1px solid var(--qi-blue);
    background: transparent;
    color: var(--qi-blue);
    cursor: pointer;
    font-size: 13px;
    text-transform: uppercase;
    letter-spacing: 0.08em;
}

.featherlight-figure {
    margin: 0;
    padding: 0;
}

.featherlight-figure img,
.featherlight-video-wrapper video {
    width: 100%;
    height: auto;
    display: block;
}

.featherlight-caption {
    margin-top: 12px;
    font-size: 14px;
    color: #ffffff;
}

.featherlight-video-wrapper {
    display: flex;
    flex-direction: column;
    gap: 12px;
}

.slide-media-block {
    margin-bottom: 12px;
    display: flex;
    flex-direction: column;
    gap: 8px;
    flex: 1 1 auto;
    min-height: 0;
}

.slide-media-gallery {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
    gap: 10px;
    align-items: stretch;
    width: 100%;
    flex: 1 1 auto;
    min-height: 0;
}

.slide-media-tile {
    border-radius: 12px;
    overflow: hidden;
    border: 1px solid var(--mi-preview-border);
    background: var(--qi-bg);
    min-height: 140px;
    display: flex;
    align-items: center;
    justify-content: center;
}

.slide-media-tile img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    transform: scale(var(--media-scale, 1));
    transform-origin: center;
}

.photo-media {
    min-height: 30vh;
}

.slide-preview-media video,
.slide-preview-media audio,
.slide-preview-media img {
    width: 100%;
    height: 100%;
    max-width: 100%;
    border-radius: 10px;
    border: 1px solid var(--mi-preview-border);
    background: var(--qi-bg);
    box-shadow: 0 10px 24px rgba(0, 45, 98, 0.14);
}

.slide-preview-media video,
.slide-preview-media img {
    max-height: clamp(260px, 55vh, 640px);
    object-fit: contain;
    align-self: center;
    flex: 1 1 auto;
}

body[data-hmi-layout="console"] .slide-preview-media video,
body[data-hmi-layout="console"] .slide-preview-media img {
    max-height: 100%;
}

.slide-media-link {
    border: 0;
    padding: 0;
    background: transparent;
    cursor: pointer;
    width: 100%;
    display: flex;
    align-items: center;
    justify-content: center;
    flex: 1 1 auto;
    min-height: 0;
}

.slide-media-link img {
    display: block;
    width: 100%;
    height: 100%;
    object-fit: contain;
}

.slide-preview-media audio {
    width: 100%;
}

.slide-media-lightbox {
    border: 1px solid rgba(0, 45, 98, 0.18);
    background: #FFFFFF;
    color: var(--qi-blue);
    padding: 6px 10px;
    border-radius: 999px;
    font-size: 13px;
    text-transform: uppercase;
    letter-spacing: 0.08em;
    font-family: var(--mi-font-display);
    cursor: pointer;
    align-self: start;
}

.featherlight.mi-lightbox .featherlight-content {
    border-radius: 16px;
    padding: 18px;
    background: #0F172A;
    color: #FFFFFF;
}

.mi-lightbox-figure {
    margin: 0;
    display: grid;
    gap: 12px;
    max-width: min(90vw, 1200px);
}

.mi-lightbox-figure img,
.mi-lightbox-figure video,
.mi-lightbox-iframe {
    width: 100%;
    height: auto;
    border-radius: 12px;
}

.mi-lightbox-iframe {
    min-height: 60vh;
    border: 0;
}

.mi-lightbox-figure figcaption {
    font-size: 14px;
    color: rgba(255, 255, 255, 0.82);
}

@media (min-height: 900px) {
    .slide-preview {
        aspect-ratio: auto;
    }
}

.slide-preview-media-caption {
    font-size: 14px;
    color: var(--qi-text-soft);
}

[data-slide-type="photo_map"] .slide-preview-media-caption {
    display: none;
}

@media (min-height: 900px) {
    .slide-preview {
        aspect-ratio: auto;
    }
}

.stage-footer {
    display: flex;
    gap: 12px;
    flex-wrap: wrap;
    margin-top: auto;
}

body[data-hmi-layout="landscape"] .stage-footer {
    gap: 10px;
}

body[data-hmi-layout="landscape"] .stage-footer .control-button {
    padding: 8px 12px;
    font-size: 12px;
}

body[data-hmi-layout="console"] .stage-footer {
    display: none;
    gap: 8px;
    padding: 6px 0 0;
    justify-content: flex-start;
}

body[data-hmi-layout="console"] .stage-footer .control-button.ghost {
    display: none;
}

body[data-hmi-layout="console"] .stage-footer {
    position: static;
    background: transparent;
    border: none;
    box-shadow: none;
}

body[data-hmi-layout="console"] .stage-footer .control-button {
    padding: 8px 14px;
    font-size: 12px;
    min-height: 28px;
}

.layout-title {
    font-size: clamp(20px, 2vw, 28px);
    color: var(--qi-blue);
    margin: 0 0 12px 0;
    font-family: var(--mi-font-display);
    text-transform: uppercase;
    letter-spacing: 0.06em;
    position: relative;
    padding-left: 12px;
    line-height: 1.2;
}

.layout-title::before {
    content: "";
    position: absolute;
    left: 0;
    top: 6px;
    width: 4px;
    height: calc(100% - 12px);
    border-radius: 999px;
    background: linear-gradient(180deg, var(--qi-blue), #6fd3ff);
}

.layout-grid {
    display: grid;
    grid-template-columns: 1.4fr 1fr;
    gap: 16px;
    flex: 1;
}

.layout-grid.single {
    grid-template-columns: 1fr;
}

.contact-list {
    display: grid;
    gap: 12px;
}

.contact-card {
    border: 1px solid var(--mi-border);
    border-radius: 12px;
    padding: 14px;
    background: var(--qi-bg-muted);
    display: grid;
    gap: 6px;
}

.contact-role {
    font-size: 12px;
    text-transform: uppercase;
    letter-spacing: 0.08em;
    color: var(--qi-blue-soft);
    font-family: var(--mi-font-display);
}

.contact-name {
    font-size: 16px;
    color: var(--qi-blue);
    font-family: var(--mi-font-display);
}

.contact-detail {
    font-size: 13px;
    color: var(--qi-text-soft);
}

.qa-card {
    border: 1px solid var(--mi-border);
    border-radius: 12px;
    padding: 16px;
    background: #FFFFFF;
    display: grid;
    gap: 10px;
}

.qa-title {
    font-size: 18px;
    color: var(--qi-blue);
    font-family: var(--mi-font-display);
    text-transform: uppercase;
    letter-spacing: 0.06em;
}

.qa-text {
    font-size: 14px;
    color: var(--qi-text-soft);
}

.metric-list {
    display: grid;
    gap: 12px;
}

.metric-column {
    display: grid;
    gap: 12px;
}

.metric-card {
    border: 1px solid var(--mi-border);
    border-radius: 12px;
    padding: 14px;
    background: #FFFFFF;
}

.metric-label {
    font-size: 12px;
    text-transform: uppercase;
    letter-spacing: 0.08em;
    color: var(--qi-blue-soft);
    font-family: var(--mi-font-display);
}

.metric-value {
    font-size: 20px;
    color: var(--qi-blue);
    margin-top: 6px;
    font-family: var(--mi-font-display);
    letter-spacing: 0.02em;
}

.slide-chart {
    width: 100%;
    border: 1px solid var(--mi-preview-border);
    border-radius: 12px;
    padding: 12px;
    background: #F7FAFC;
    display: grid;
    gap: 8px;
    flex: 1 1 auto;
    min-height: 0;
    order: var(--slide-chart-order, 4);
}

.slide-chart-title {
    font-size: 14px;
    color: var(--qi-navy);
    font-family: var(--mi-font-display);
    text-transform: uppercase;
    letter-spacing: 0.06em;
    font-weight: 600;
}

.slide-chart-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(64px, 1fr));
    gap: 8px;
    align-items: end;
    min-height: 0;
    height: 100%;
}

.slide-chart-bar {
    display: grid;
    gap: 6px;
    align-items: end;
    height: 100%;
}

.slide-chart-bar-value {
    font-size: 12px;
    color: var(--qi-navy);
    text-align: center;
}

.slide-chart-bar-fill {
    width: 100%;
    border-radius: 6px 6px 0 0;
    background: linear-gradient(180deg, var(--qi-blue) 0%, var(--qi-navy) 100%);
    min-height: 6px;
}

.slide-chart-bar-label {
    font-size: 11px;
    color: var(--qi-text-soft);
    text-align: center;
}

.slide-chart-note {
    font-size: 11px;
    color: var(--qi-text-soft);
}

.slide-chart.is-clarksoft {
    gap: 10px;
}

.slide-chart-canvas {
    width: 100%;
    border-radius: 12px;
    background: #FFFFFF;
    border: 1px solid var(--mi-preview-inner-border);
    padding: 8px;
}

.echarts-canvas {
    width: 100%;
    min-height: 220px;
    height: 260px;
}

.insight-chart .echarts-canvas {
    min-height: 120px;
    height: 160px;
}

.sparkline-chart .echarts-canvas {
    min-height: 70px;
    height: 80px;
}

.slide-chart-svg {
    width: 100%;
    height: 260px;
    display: block;
}

.slide-chart-legend {
    display: flex;
    flex-wrap: wrap;
    gap: 10px;
    font-size: 12px;
    color: var(--qi-text-soft);
}

.slide-chart-legend-item {
    display: inline-flex;
    align-items: center;
    gap: 6px;
}

.slide-chart-legend-swatch {
    width: 10px;
    height: 10px;
    border-radius: 999px;
    display: inline-block;
}

.data-callout {
    border: 1px solid var(--mi-border);
    border-radius: 12px;
    padding: 16px;
    background: linear-gradient(135deg, rgba(0, 147, 208, 0.08), var(--mi-sand));
    display: grid;
    gap: 8px;
}

.data-callout-title {
    font-size: 16px;
    color: var(--qi-blue);
    font-family: var(--mi-font-display);
    text-transform: uppercase;
    letter-spacing: 0.06em;
}

.data-callout-body {
    font-size: 15px;
    color: var(--qi-text-soft);
    line-height: 1.5;
}

.photo-placeholder {
    border: 1px dashed var(--mi-preview-inner-border);
    border-radius: 12px;
    min-height: 220px;
    background: #FFFFFF;
    display: flex;
    align-items: center;
    justify-content: center;
    color: var(--qi-text-soft);
    font-size: 14px;
}

.photo-caption {
    font-size: 13px;
    color: var(--qi-text-soft);
    margin: 12px 0;
}

.callout-list {
    display: grid;
    gap: 10px;
}

.callout-item {
    font-size: 14px;
    color: var(--qi-text-soft);
    padding: 10px 12px 10px 16px;
    border-radius: 10px;
    background: linear-gradient(135deg, rgba(0, 147, 208, 0.08), #FFFFFF 70%);
    border: 1px solid rgba(0, 45, 98, 0.1);
    box-shadow: 0 8px 18px rgba(0, 45, 98, 0.08);
    position: relative;
}

.callout-item::before {
    content: "";
    position: absolute;
    left: 8px;
    top: 10px;
    width: 3px;
    height: calc(100% - 20px);
    border-radius: 999px;
    background: linear-gradient(180deg, var(--qi-blue), rgba(0, 45, 98, 0.4));
}

.control-button {
    border: 1px solid var(--mi-border);
    background: #FFFFFF;
    color: var(--qi-blue);
    padding: 10px 16px;
    border-radius: 10px;
    font-size: 13px;
    cursor: pointer;
    text-transform: uppercase;
    letter-spacing: 0.08em;
    font-family: var(--mi-font-display);
}

body[data-hmi-layout="console"] .control-button {
    padding: 6px 10px;
    font-size: 12px;
}

.control-button.primary {
    background: var(--qi-blue);
    color: #FFFFFF;
    border-color: var(--qi-blue);
}

.control-button.ghost {
    background: var(--mi-sand);
    border-color: var(--mi-sand);
    color: var(--qi-blue-soft);
}

.side-panel {
    display: grid;
    gap: 16px;
    align-content: start;
    min-width: 0;
    min-height: 0;
    overflow-y: auto;
}

body[data-hmi-layout="console"] .side-panel {
    max-height: calc(100vh - var(--mi-console-header-height) - var(--mi-console-menu-height) - var(--mi-console-carousel-height) - var(--mi-console-agenda-height) - var(--mi-console-status-height) - 24px);
    overflow-y: auto;
    padding-right: 4px;
    scrollbar-width: none;
    -ms-overflow-style: none;
}

body[data-hmi-layout="console"] .side-panel::-webkit-scrollbar {
    width: 0;
}


.panel-card {
    background-color: var(--mi-card-bg);
    background-image: var(--mi-card-shade);
    border: 1px solid var(--mi-card-border);
    border-radius: 14px;
    padding: 16px;
    border-top: 3px solid var(--qi-blue);
    animation: fade-in 0.8s ease;
    min-width: 0;
    min-height: 0;
}

body[data-hmi-layout="console"] .panel-card {
    padding: 12px;
}

.slide-list-panel .panel-card:nth-of-type(1) {
    animation-delay: 0.04s;
}

.slide-list-panel .panel-card:nth-of-type(2) {
    animation-delay: 0.1s;
}

.side-panel .panel-card:nth-of-type(1) {
    animation-delay: 0.06s;
}

.side-panel .panel-card:nth-of-type(2) {
    animation-delay: 0.12s;
}

.side-panel .panel-card:nth-of-type(3) {
    animation-delay: 0.18s;
}

.panel-title {
    font-size: 15px;
    color: var(--qi-blue);
    margin: 0 0 10px 0;
    font-family: var(--mi-font-display);
    text-transform: uppercase;
    letter-spacing: 0.08em;
}

body[data-hmi-layout="console"] .panel-title {
    font-size: 13px;
    margin-bottom: 8px;
}

.panel-list {
    margin: 0;
    padding-left: 18px;
    color: var(--qi-text-soft);
    font-size: 14px;
    line-height: 1.6;
}

body[data-hmi-layout="console"] .panel-list,
body[data-hmi-layout="console"] .panel-text {
    font-size: 13px;
}
.panel-list .is-active {
    color: var(--qi-blue);
    font-weight: 600;
}

.audit-table-wrap {
    margin-top: 12px;
    overflow-x: auto;
    border: 1px solid var(--mi-card-border);
    border-radius: 10px;
}

.audit-table {
    width: 100%;
    border-collapse: collapse;
    font-size: 13px;
    color: var(--qi-text);
}

.audit-table thead {
    background: var(--mi-menu-bg);
    color: var(--qi-blue);
}

.audit-table th,
.audit-table td {
    padding: 10px 12px;
    border-bottom: 1px solid var(--mi-card-border);
    text-align: left;
    vertical-align: top;
}

.audit-table tbody tr:nth-child(even) {
    background: rgba(255, 255, 255, 0.04);
}

.panel-list-notes {
    margin-top: 8px;
}

.panel-text {
    margin: 0;
    font-size: 14px;
    color: var(--qi-text-soft);
    line-height: 1.5;
}

.panel-subtitle {
    margin-top: 10px;
    font-size: 12px;
    color: var(--qi-blue-soft);
    text-transform: uppercase;
    letter-spacing: 0.08em;
    font-family: var(--mi-font-display);
}

.panel-text-muted {
    color: rgba(59, 58, 58, 0.7);
}

.live-controls {
    display: flex;
    align-items: center;
    gap: 8px;
    margin-top: 10px;
}

body[data-hmi-layout="console"] .live-controls {
    gap: 6px;
    margin-top: 6px;
}

.live-toggle {
    border: 1px solid var(--mi-slide-item-border);
    background: var(--mi-slide-item-bg);
    color: var(--qi-blue);
    padding: 6px 10px;
    border-radius: 8px;
    font-size: 12px;
    cursor: pointer;
}

body[data-hmi-layout="console"] .live-toggle {
    padding: 4px 8px;
    font-size: 10px;
}

.live-toggle.is-paused {
    border-color: var(--qi-accent);
    color: var(--qi-accent);
}

.file-input-label {
    font-size: 12px;
    text-transform: uppercase;
    letter-spacing: 0.08em;
    color: var(--qi-blue-soft);
    display: block;
    margin-bottom: 6px;
    font-family: var(--mi-font-display);
}

.file-input {
    width: 100%;
    font-size: 13px;
    padding: 8px;
    border-radius: 10px;
    border: 1px solid var(--mi-border);
    background: #FFFFFF;
    color: var(--qi-text);
}

.deck-select {
    width: 100%;
    font-size: 13px;
    padding: 8px;
    border-radius: 10px;
    border: 1px solid var(--mi-border);
    background: #FFFFFF;
    color: var(--qi-text);
}

.run-id-field {
    display: grid;
    gap: 8px;
}

.run-id-label {
    font-size: 12px;
    text-transform: uppercase;
    letter-spacing: 0.08em;
    color: var(--qi-blue-soft);
    font-family: var(--mi-font-display);
}

.run-id-input {
    padding: 10px 12px;
    border-radius: 10px;
    border: 1px solid var(--mi-border);
    font-size: 14px;
    font-family: inherit;
}

.run-log-actions {
    margin-top: 10px;
    display: grid;
}

.version-list {
    display: grid;
    gap: 8px;
    margin-top: 10px;
}

.version-item {
    border: 1px solid var(--mi-border);
    border-radius: 10px;
    padding: 10px;
    background: #FFFFFF;
    display: grid;
    gap: 4px;
}

.version-title {
    font-size: 13px;
    color: var(--qi-blue);
    font-weight: 600;
    font-family: var(--mi-font-display);
    text-transform: uppercase;
    letter-spacing: 0.06em;
}

.version-meta {
    font-size: 12px;
    color: var(--qi-text-soft);
}

.version-actions {
    display: flex;
    justify-content: flex-end;
}

.version-use {
    border: 1px solid var(--mi-border);
    background: #FFFFFF;
    color: var(--qi-blue);
    padding: 6px 10px;
    border-radius: 8px;
    font-size: 12px;
    cursor: pointer;
    text-transform: uppercase;
    letter-spacing: 0.06em;
    font-family: var(--mi-font-display);
}

.mini-slide {
    border: 1px dashed var(--mi-preview-inner-border);
    border-radius: 10px;
    padding: 12px;
    background: var(--qi-bg-muted);
    font-size: 13px;
    color: var(--qi-text-soft);
}

details.panel-card {
    padding-bottom: 10px;
}

details.panel-card summary {
    list-style: none;
    cursor: pointer;
}

details.panel-card summary::-webkit-details-marker {
    display: none;
}

.status-bar {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
    gap: 12px;
    padding: 16px 24px 24px;
}

body[data-hmi-layout="landscape"] .status-bar {
    grid-template-columns: repeat(3, minmax(0, 1fr));
    gap: 10px;
    padding: 10px 18px 16px;
}

body[data-hmi-layout="console"] .status-bar {
    display: none;
}

.status-item {
    background: #FFFFFF;
    border-radius: 12px;
    padding: 12px 16px;
    border: 1px solid var(--mi-border);
    font-size: 12px;
    color: var(--qi-text-soft);
}

body[data-hmi-layout="landscape"] .status-item {
    padding: 10px 12px;
}

body[data-hmi-layout="console"] .status-item {
    padding: 8px 12px;
    font-size: 11px;
}

.status-live-grid {
    display: flex;
    flex-wrap: wrap;
    gap: 6px 10px;
    font-size: 11px;
    color: var(--qi-text-soft);
}

.status-live-chip {
    padding: 4px 6px;
    border-radius: 999px;
    border: 1px solid var(--mi-border);
    background: rgba(255, 255, 255, 0.7);
}

.status-list {
    display: flex;
    flex-wrap: wrap;
    gap: 6px 10px;
    list-style: none;
    padding: 0;
    margin: 6px 0 0;
}

.status-list li {
    padding: 3px 6px;
    border-radius: 8px;
    border: 1px solid var(--mi-border);
    font-size: 11px;
}

.status-item strong {
    display: block;
    color: var(--qi-blue);
    margin-bottom: 4px;
}

.help-dialog {
    border: 0;
    border-radius: 16px;
    padding: 20px;
    max-width: 420px;
    width: calc(100% - 32px);
    border: 2px solid var(--mi-border-strong);
    background: #FFFFFF;
}

.help-dialog::backdrop {
    background: rgba(0, 0, 0, 0.4);
}

.help-title {
    font-size: 18px;
    color: var(--qi-blue);
    margin: 0 0 8px 0;
    font-family: var(--mi-font-display);
    text-transform: uppercase;
    letter-spacing: 0.06em;
}

.help-subtitle {
    font-size: 12px;
    text-transform: uppercase;
    letter-spacing: 0.08em;
    color: var(--qi-blue-soft);
    margin: 12px 0 6px 0;
    font-family: var(--mi-font-display);
}

.help-text {
    font-size: 13px;
    color: var(--qi-text-soft);
    line-height: 1.5;
    margin: 0 0 16px 0;
}

.help-list {
    margin: 0 0 16px 18px;
    padding: 0;
    font-size: 13px;
    color: var(--qi-text-soft);
    line-height: 1.5;
}

.help-close {
    border: 0;
    background: var(--qi-blue);
    color: #FFFFFF;
    padding: 10px 16px;
    border-radius: 10px;
    cursor: pointer;
    font-family: var(--mi-font-display);
    text-transform: uppercase;
    letter-spacing: 0.08em;
}

.fullscreen-controls {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 12px;
    padding: 12px;
    border-radius: 12px;
    border: 1px dashed var(--mi-preview-inner-border);
    background: var(--mi-preview-bg);
}

.fullscreen-hint {
    font-size: 12px;
    color: var(--qi-text-soft);
}

body[data-hmi-view="fullscreen"] .header,
body[data-hmi-view="fullscreen"] .menu-bar,
body[data-hmi-view="fullscreen"] .carousel-row,
body[data-hmi-view="fullscreen"] .agenda-row,
body[data-hmi-view="fullscreen"] .slide-list-panel,
body[data-hmi-view="fullscreen"] .side-panel,
body[data-hmi-view="fullscreen"] .stage-header {
    display: none;
}

body[data-hmi-view="fullscreen"] {
    overflow: hidden;
}

body[data-hmi-view="fullscreen"] .page {
    padding: 0;
    min-height: 100vh;
    height: 100vh;
}

body[data-hmi-view="fullscreen"] .main-grid {
    grid-template-columns: 1fr;
    padding: 0;
    min-height: 100vh;
    height: 100vh;
}

body[data-hmi-view="fullscreen"] .stage {
    border-radius: 0;
    border: none;
    padding: 0;
    min-height: 100vh;
    height: 100vh;
    box-shadow: none;
    background: var(--mi-stage-bg);
}

body[data-hmi-view="fullscreen"] .stage-body {
    grid-template-columns: minmax(0, 1fr);
    grid-template-rows: minmax(0, 1fr);
    align-items: center;
    justify-items: center;
    height: 100%;
}

body[data-hmi-view="fullscreen"] .stage-rail,
body[data-hmi-view="fullscreen"] .status-bar {
    display: none;
}

body[data-hmi-view="fullscreen"] .slide-preview {
    min-height: 100vh;
    height: 100vh;
    width: 100%;
    aspect-ratio: auto;
    border-radius: 0;
    border: none;
    padding: 0;
}

body[data-hmi-view="fullscreen"][data-hmi-role="projector"] .slide-preview {
    min-height: 0;
    height: var(--slide-frame-height, auto);
    max-height: 100%;
    width: var(--slide-frame-width, 100%);
    max-width: 100%;
    aspect-ratio: var(--slide-aspect, 16 / 9);
}

body[data-hmi-view="fullscreen"] .slide-preview-inner {
    border-radius: 0;
    border: none;
    height: 100%;
    padding: 40px;
}

body[data-hmi-view="fullscreen"][data-hmi-role="projector"] .slide-preview-inner {
    width: var(--slide-base-width);
    height: var(--slide-base-height);
}

body[data-hmi-view="fullscreen"] .stage-footer {
    position: absolute;
    left: 50%;
    bottom: 24px;
    transform: translateX(-50%);
    border-radius: 999px;
    background: rgba(255, 255, 255, 0.85);
    padding: 10px 16px;
    gap: 10px;
    z-index: 2;
}

body[data-hmi-role="projector"] .stage-footer {
    left: auto;
    right: 24px;
    bottom: 24px;
    transform: none;
    background: rgba(0, 45, 98, 0.7);
    border: 1px solid rgba(255, 255, 255, 0.3);
}

body[data-hmi-view="fullscreen"][data-hmi-role="projector"] .stage-footer {
    display: none;
}

body[data-hmi-role="projector"] .stage-footer .control-button {
    font-size: 11px;
    padding: 6px 10px;
}

body[data-hmi-view="fullscreen"] [data-action="fullscreen-open"] {
    display: none;
}

@keyframes rise-in {
    from {
        transform: translateY(12px);
        opacity: 0;
    }
    to {
        transform: translateY(0);
        opacity: 1;
    }
}

@keyframes fade-in {
    from {
        opacity: 0;
        transform: translateY(10px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

@media (max-width: 1100px) {
    .main-grid {
        grid-template-columns: 1fr;
    }

    .layout-grid {
        grid-template-columns: 1fr;
    }

    .stage-body {
        grid-template-columns: 1fr;
    }

    .stage-rail {
        grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
    }

    .slide-preview-grid {
        grid-template-columns: 1fr;
    }

    .slide-preview-aside {
        order: 2;
    }
}

@media (orientation: portrait) {
    body[data-hmi-layout="console"] .stage-rail {
        position: fixed;
        left: 10px;
        right: 10px;
        bottom: 10px;
        padding: 8px;
        border-radius: 16px;
        background: rgba(8, 18, 30, 0.92);
        border: 1px solid rgba(0, 147, 208, 0.2);
        box-shadow: 0 -12px 28px rgba(0, 0, 0, 0.25);
        z-index: 5;
    }

    body[data-hmi-layout="console"] .rail-tabs {
        display: grid;
    }

    body[data-hmi-layout="console"] .stage-rail .rail-card {
        display: none;
    }

    body[data-hmi-layout="console"] .stage-rail .rail-card.rail-live,
    body[data-hmi-layout="console"] .stage-rail .rail-card.is-active {
        display: grid;
    }

    body[data-hmi-layout="console"] .stage-footer {
        top: 14px;
        bottom: auto;
    }

    body[data-hmi-layout="console"] .stage {
        padding-bottom: 180px;
    }
}

@media (max-width: 900px) {
    .settings-shell {
        grid-template-columns: minmax(0, 1fr);
    }

    .settings-nav {
        position: static;
    }

    body[data-hmi-layout="console"] .main-grid {
        grid-template-columns: 1fr;
    }

    body[data-hmi-layout="console"] .side-panel {
        display: none;
    }

    body[data-hmi-layout="console"] .stage-body {
        grid-template-columns: 1fr;
    }

    body[data-hmi-layout="console"] .stage-rail {
        position: fixed;
        left: 12px;
        right: 12px;
        bottom: 12px;
        z-index: 50;
        background: rgba(10, 22, 36, 0.96);
        border: 1px solid rgba(0, 147, 208, 0.45);
        border-radius: 16px;
        padding: 8px;
        display: flex;
        flex-direction: column;
        gap: 8px;
        max-height: 44vh;
    }

    body[data-hmi-layout="console"] .rail-tabs {
        order: 1;
    }

    body[data-hmi-layout="console"] .stage-rail .rail-card.is-active {
        order: 2;
        max-height: 28vh;
        overflow: auto;
    }

    body[data-hmi-layout="console"] .stage-rail .rail-card.rail-live {
        order: 3;
    }

    body[data-hmi-layout="console"] .status-live-grid {
        grid-template-columns: repeat(2, minmax(0, 1fr));
    }

    body[data-hmi-layout="console"] .stage-footer {
        top: 12px;
        bottom: auto;
    }

    body[data-hmi-layout="console"] .stage {
        padding-bottom: 220px;
    }
}

@media (max-width: 720px) {
    .header {
        flex-direction: column;
        align-items: flex-start;
        gap: 12px;
    }

    body[data-hmi-layout="console"] .header-subtitle,
    body[data-hmi-layout="console"] .header-subtitle-meta,
    body[data-hmi-layout="console"] [data-deck-title] {
        display: none;
    }

    .status-bar {
        grid-template-columns: 1fr;
    }

    .slide-preview {
        aspect-ratio: auto;
    }

    .tools-panel {
        position: fixed;
        left: 12px;
        right: 12px;
        top: 64px;
        max-width: calc(100% - 24px);
    }
}

@media (max-height: 800px) {
    body[data-hmi-layout="console"] .header {
        padding: 8px 14px;
    }

    body[data-hmi-layout="console"] .header-logo img {
        height: 30px;
    }

    body[data-hmi-layout="console"] .menu-bar {
        padding: 4px 14px;
    }

    body[data-hmi-layout="console"] .carousel-row {
        padding: 6px 14px 8px;
    }

    body[data-hmi-layout="console"] .agenda-row {
        padding: 4px 14px 6px;
    }

    body[data-hmi-layout="console"] .carousel-item {
        min-width: 140px;
        padding: 6px 8px;
    }

    body[data-hmi-layout="console"] .carousel-track {
        max-height: 60px;
    }

    body[data-hmi-layout="console"] .main-grid {
        gap: 12px;
    }

    body[data-hmi-layout="console"] .slide-preview {
        min-height: 0;
        max-height: none;
    }

    body[data-hmi-layout="console"] .status-bar {
        padding: 8px 14px 12px;
    }
}

@media (max-height: 980px) {
    body[data-hmi-layout="console"] .rail-focus {
        display: none;
    }
}

@media (max-height: 860px) {
    body[data-hmi-layout="console"] .rail-notes {
        display: none;
    }
}

@media (max-height: 760px) {
    body[data-hmi-layout="console"] .rail-live {
        display: none;
    }
}

@media (max-height: 680px) {
    body[data-hmi-layout="console"] .rail-next {
        display: none;
    }
}

@media (prefers-reduced-motion: reduce) {
    * {
        animation: none !important;
        transition: none !important;
    }
    .stage {
        animation: none !important;
    }
}

body[data-reduced-motion="true"] * {
    animation: none !important;
    transition: none !important;
}
body[data-reduced-motion="true"] .stage {
    animation: none !important;
}
