<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ClarkSoft HMI Presenter</title>
    <link rel="stylesheet" href="/assets/vendor/css/plyr-3.7.8.css" />
    <link rel="stylesheet" href="/assets/vendor/css/featherlight-1.7.14.min.css" />
    <link rel="stylesheet" href="master_irrigator_presentation_hmi.css?v=1">
</head>
<body data-slide-type="title" data-slide-scope="deck" data-theme="quality_irrigation" data-hmi-layout="newspaper" data-hmi-view="control">
    <div id="hmi-bootstrap-warning" class="hmi-warning">
        Loading layout. If this message stays, hard refresh (Ctrl+F5).
    </div>
    <script>
        (function() {
            try {
                var isWindows = navigator.userAgent.indexOf("Windows") !== -1;
                var isLocalhost = location.hostname === "localhost" || location.hostname === "127.0.0.1";
                if (isWindows && isLocalhost) {
                    var warning = document.getElementById("hmi-bootstrap-warning");
                    if (warning) {
                        warning.textContent = "Windows localhost can be wrong. Use the WSL IP link from the terminal.";
                    }
                }
            } catch (error) {
                return;
            }
        })();
    </script>
    <div class="page">
        <header class="header">
            <div class="header-left">
                <div class="header-stack">
                <div class="header-title">ClarkSoft HMI Presenter</div>
                <div class="header-subtitle">Program deck: Colorado Master Irrigator | Republican River Basin</div>
                <div class="header-subtitle header-subtitle-meta">Quality Irrigation | Valley dealer since 1986</div>
                <div class="header-subtitle" data-deck-title>Deck: not loaded</div>
                <div class="theme-badge" aria-label="Current theme">
                    <span class="theme-chip" aria-hidden="true"></span>
                    <span data-theme-label>LCARS</span>
                </div>
            </div>
            </div>
            <div class="header-center">
                <div class="header-logo header-logo-centered">
                    <img src="/assets/quality_irrigation_logo.png" alt="Quality Irrigation logo">
                </div>
            </div>
                <div class="header-right">
                    <details class="tools-combobox" id="deck-tools">
                        <summary>Deck tools</summary>
                        <div class="tools-panel" role="group" aria-label="Deck tools">
                            <label class="file-input-label" for="deck-file-input">Slide JSON</label>
                            <input class="file-input" id="deck-file-input" type="file" accept=".json,application/json">
                            <p class="panel-text panel-text-muted carousel-muted" data-deck-file-status>Using server deck.</p>
                            <label class="file-input-label" for="deck-select">Deck</label>
                            <select class="deck-select" id="deck-select"></select>
                            <p class="panel-text panel-text-muted carousel-muted" data-deck-select-status>Loading deck list.</p>
                            <p class="panel-text carousel-muted" data-deck-description>Deck description will appear here.</p>
                            <p class="panel-text panel-text-muted carousel-muted" data-deck-file>File: not set</p>
                        </div>
                    </details>
                    <span class="status-pill">Draft</span>
                </div>
        </header>

        <nav class="menu-bar" aria-label="Presentation menu">
            <details class="menu" name="hmi-menu">
                <summary><img class="menu-badge" src="/assets/icons/console/deck_256.png" alt="" aria-hidden="true">File</summary>
                <div class="menu-panel" role="group" aria-label="File">
                    <button class="menu-item" type="button" data-menu-action="file-open"><img class="menu-item-badge" src="/assets/icons/console/deck_256.png" alt="" aria-hidden="true">Open JSON...</button>
                    <button class="menu-item" type="button" data-menu-action="file-select"><img class="menu-item-badge" src="/assets/icons/console/deck_256.png" alt="" aria-hidden="true">Select deck from catalog</button>
                    <button class="menu-item" type="button" data-menu-action="file-reload"><img class="menu-item-badge" src="/assets/icons/console/deck_256.png" alt="" aria-hidden="true">Reload current deck</button>
                    <button class="menu-item" type="button" data-menu-action="file-close"><img class="menu-item-badge" src="/assets/icons/console/deck_256.png" alt="" aria-hidden="true">Close deck</button>
                    <button class="menu-item" type="button" data-menu-action="file-download"><img class="menu-item-badge" src="/assets/icons/console/deck_256.png" alt="" aria-hidden="true">Download current deck</button>
                </div>
            </details>
            <details class="menu" name="hmi-menu">
                <summary><img class="menu-badge" src="/assets/icons/console/slides_256.png" alt="" aria-hidden="true">Navigate</summary>
                <div class="menu-panel" role="group" aria-label="Navigate">
                    <button class="menu-item" type="button" data-menu-action="nav-prev"><img class="menu-item-badge" src="/assets/icons/console/slides_256.png" alt="" aria-hidden="true">Previous slide</button>
                    <button class="menu-item" type="button" data-menu-action="nav-next"><img class="menu-item-badge" src="/assets/icons/console/slides_256.png" alt="" aria-hidden="true">Next slide</button>
                    <button class="menu-item" type="button" data-menu-action="nav-first"><img class="menu-item-badge" src="/assets/icons/console/slides_256.png" alt="" aria-hidden="true">First slide</button>
                    <button class="menu-item" type="button" data-menu-action="nav-last"><img class="menu-item-badge" src="/assets/icons/console/slides_256.png" alt="" aria-hidden="true">Last slide</button>
                    <button class="menu-item" type="button" data-menu-action="nav-jump"><img class="menu-item-badge" src="/assets/icons/console/slides_256.png" alt="" aria-hidden="true">Jump to slide…</button>
                </div>
            </details>
            <details class="menu" name="hmi-menu">
                <summary><img class="menu-badge" src="/assets/icons/console/settings_256.png" alt="" aria-hidden="true">Tools</summary>
                <div class="menu-panel" role="group" aria-label="Tools">
                    <a class="menu-item" href="deck_editor.html"><img class="menu-item-badge" src="/assets/icons/console/deck_256.png" alt="" aria-hidden="true">Deck editor…</a>
                    <a class="menu-item" href="version_manager.html"><img class="menu-item-badge" src="/assets/icons/console/deck_256.png" alt="" aria-hidden="true">Version manager…</a>
                    <a class="menu-item" href="settings.html"><img class="menu-item-badge" src="/assets/icons/console/settings_256.png" alt="" aria-hidden="true">Settings…</a>
                    <a class="menu-item" href="hmi_data_tools.html"><img class="menu-item-badge" src="/assets/icons/console/chart_256.png" alt="" aria-hidden="true">Data tools…</a>
                </div>
            </details>
            <details class="menu" name="hmi-menu">
                <summary><img class="menu-badge" src="/assets/icons/console/projector_256.png" alt="" aria-hidden="true">View</summary>
                <div class="menu-panel" role="group" aria-label="View">
                    <button class="menu-item" type="button" data-menu-action="view-open-presenter"><img class="menu-item-badge" src="/assets/icons/console/slides_256.png" alt="" aria-hidden="true">Open presenter view</button>
                    <button class="menu-item" type="button" data-menu-action="view-fullscreen"><img class="menu-item-badge" src="/assets/icons/console/console_scale_256.png" alt="" aria-hidden="true">Toggle fullscreen slide</button>
                    <button class="menu-item" type="button" data-menu-action="view-open-fullscreen"><img class="menu-item-badge" src="/assets/icons/console/projector_256.png" alt="" aria-hidden="true">Open projector window</button>
                    <button class="menu-item" type="button" data-menu-action="view-reset"><img class="menu-item-badge" src="/assets/icons/console/layout_grid_256.png" alt="" aria-hidden="true">Reset layout</button>
                </div>
            </details>
            <details class="menu" name="hmi-menu">
                <summary><img class="menu-badge" src="/assets/icons/console/theme_palette_256.png" alt="" aria-hidden="true">Theme</summary>
                <div class="menu-panel" role="group" aria-label="Theme">
                    <div class="theme-inline">
                        <span class="theme-label">Theme</span>
                        <select class="theme-select" id="theme-select" aria-label="Theme selector"></select>
                    </div>
                </div>
            </details>
        </nav>

        <section class="carousel-row" data-carousel-row aria-label="Slide carousel">
            <div class="carousel-toolbar">
                <div class="carousel-status">
                    <span class="carousel-label">Slides</span>
                    <span class="carousel-count"><span data-carousel-index>1</span> / <span data-carousel-count>0</span></span>
                    <span class="carousel-current" data-carousel-title>Not loaded</span>
                </div>
                <div class="carousel-controls">
                    <div class="carousel-nav" role="group" aria-label="Slide navigation">
                        <button class="carousel-nav-button" type="button" data-action="prev" aria-label="Previous slide">◀</button>
                        <button class="carousel-nav-button" type="button" data-action="next" aria-label="Next slide">▶</button>
                    </div>
                    <div class="carousel-combobox">
                        <label class="carousel-select-label" for="slide-jump-input">Jump</label>
                        <input
                            id="slide-jump-input"
                            class="carousel-input"
                            type="text"
                            inputmode="numeric"
                            pattern="[0-9]*"
                            placeholder="1"
                            autocomplete="off"
                            list="slide-jump-list"
                            data-slide-jump-input
                        />
                        <datalist id="slide-jump-list" data-slide-jump-list></datalist>
                    </div>
                </div>
            </div>
            <div class="carousel-track" data-slide-carousel></div>
        </section>

        <section class="agenda-row" data-agenda-row aria-label="Agenda chips">
            <div class="agenda-row-label">Agenda</div>
            <div class="agenda-row-chips" data-agenda-chips role="list"></div>
            <p class="agenda-row-empty" data-agenda-chips-empty hidden>Agenda items not loaded.</p>
            <p class="agenda-row-message" data-agenda-message hidden aria-live="polite"></p>
            <div class="agenda-row-actions">
                <span class="agenda-detail-status" data-agenda-detail-status>Details: Off</span>
                <button class="agenda-detail-toggle" type="button" data-action="agenda-details-toggle" aria-pressed="false">Details: Off</button>
            </div>
            <div class="agenda-popover" data-agenda-popover hidden role="dialog" aria-label="Agenda details">
                <div class="agenda-popover-header">
                    <strong data-agenda-popover-title>Agenda detail</strong>
                    <span class="agenda-popover-count" data-agenda-popover-count></span>
                </div>
                <ul class="agenda-popover-list" data-agenda-popover-list></ul>
                <p class="agenda-popover-empty" data-agenda-popover-empty hidden>No slides found for this section.</p>
                <p class="agenda-popover-tip" data-agenda-popover-tip hidden>Slide list opened for review.</p>
            </div>
        </section>

        <main class="main-grid layout-hide-list">
            <aside class="slide-list-panel is-hidden" id="slide-list-panel">
                <div class="panel-card">
                    <div class="panel-title">Slides</div>
                    <div class="slide-list" data-slide-list></div>
                </div>
                <!-- Deck editor actions moved to the dedicated deck_editor page -->
            </aside>

            <section class="stage">
                <div class="stage-header">
                    <span>Now showing</span>
                    <span>Slide <span data-slide-index>1</span> of <span data-slide-count>0</span></span>
                </div>
                <div class="stage-body">
                    <div class="slide-preview">
                        <div class="slide-preview-inner">
                            <div class="slide-preview-grid">
                                <div class="slide-preview-main">
                                    <div class="slide-preview-title" data-slide-title>Title Slide</div>
                                    <div class="slide-focus-tag" data-slide-focus hidden></div>
                                    <div class="slide-preview-body" data-slide-subtitle>
                                        Replace this text with the approved title and subtitle for the
                                        current segment of the presentation.
                                    </div>
                                    <ul class="slide-preview-list" data-slide-bullets hidden></ul>
                                    <div class="slide-preview-media slide-preview-stretch" data-slide-media hidden></div>
                                    <div class="slide-chart slide-preview-stretch" data-slide-chart hidden></div>
                                    <div class="slide-preview-note" data-slide-body>Notes placeholder.</div>
                                    <div class="slide-qa" data-slide-qa hidden>
                                        <div class="qa-prompt" data-qa-prompt></div>
                                        <div class="qa-options" data-qa-options></div>
                                    </div>
                                </div>
                                <aside class="slide-preview-aside" hidden>
                                    <div class="slide-preview-aside-title" data-slide-aside-title>Key highlights</div>
                                    <div class="slide-preview-aside-charts" data-slide-aside-charts hidden></div>
                                    <div class="metric-list" data-metric-list hidden></div>
                                    <div class="callout-list" data-callout-list hidden></div>
                                </aside>
                            </div>
                        </div>
                    </div>
                    <aside class="stage-rail" data-stage-rail aria-label="Presenter rail">
                        <div class="rail-tabs" data-rail-tabs aria-label="Presenter rail tabs">
                            <button class="rail-tab is-active" type="button" data-rail-tab="next" aria-pressed="true">Next</button>
                            <button class="rail-tab" type="button" data-rail-tab="notes" aria-pressed="false">Notes</button>
                            <button class="rail-tab" type="button" data-rail-tab="tools" aria-pressed="false">Tools</button>
                            <button class="rail-tab" type="button" data-rail-tab="agenda" aria-pressed="false">Agenda</button>
                            <button class="rail-tab" type="button" data-rail-tab="credits" aria-pressed="false">Credits</button>
                            <button class="rail-tab" type="button" data-rail-tab="workflow" aria-pressed="false">Workflow</button>
                            <button class="rail-tab" type="button" data-rail-tab="live" aria-pressed="false">Live</button>
                            <button class="rail-tab" type="button" data-rail-tab="focus" aria-pressed="false">Focus</button>
                        </div>
                        <div class="rail-card rail-next" data-rail-next data-rail-panel="next">
                            <div class="rail-title">Next slide</div>
                            <div class="rail-next-body" data-next-slide>Agenda overview and key takeaways.</div>
                        </div>
                        <div class="rail-card rail-notes" data-rail-notes data-rail-panel="notes">
                            <div class="rail-title">Speaker notes</div>
                            <p class="rail-text" data-speaker-notes>Notes will appear here.</p>
                            <ul class="rail-list" data-speaker-notes-list hidden></ul>
                        </div>
                        <div class="rail-card rail-tools" data-rail-tools data-rail-panel="tools">
                            <div class="rail-title">Tools</div>
                            <div class="rail-tool-grid">
                                <a class="rail-link" href="settings.html"><img class="rail-link-badge" src="/assets/icons/console/settings_256.png" alt="" aria-hidden="true">Settings</a>
                                <a class="rail-link" href="deck_editor.html"><img class="rail-link-badge" src="/assets/icons/console/deck_256.png" alt="" aria-hidden="true">Deck editor</a>
                                <a class="rail-link" href="version_manager.html"><img class="rail-link-badge" src="/assets/icons/console/deck_256.png" alt="" aria-hidden="true">Version manager</a>
                                <a class="rail-link" href="hmi_data_tools.html"><img class="rail-link-badge" src="/assets/icons/console/chart_256.png" alt="" aria-hidden="true">Data tools</a>
                            </div>
                        </div>
                        <div class="rail-card rail-agenda" data-rail-panel="agenda">
                            <div class="rail-title">Agenda</div>
                            <ul class="panel-list" data-agenda-list></ul>
                            <p class="panel-text panel-text-muted" data-agenda-empty hidden>Agenda items not loaded.</p>
                        </div>
                        <div class="rail-card rail-credits" data-rail-panel="credits">
                            <div class="rail-title">Branding + credits</div>
                            <ul class="panel-list">
                                <li><strong>Design:</strong> ClarkSoft Agentic Development Teams.</li>
                                <li><strong>Licensed owner:</strong> Quality Irrigation.</li>
                                <li><strong>Program deck:</strong> Colorado Master Irrigator - Republican River Basin.</li>
                                <li><strong>Program status:</strong> Benefactor only; not affiliated with ClarkSoft.</li>
                                <li><strong>Sponsor + presenter:</strong> Quality Irrigation.</li>
                                <li><strong>Ownership:</strong> ClarkSoft owns all IP and developed products from this workspace.</li>
                                <li><strong>Purpose:</strong> Support high-quality presentations for rural grower communities in the Republican River Basin.</li>
                            </ul>
                        </div>
                        <div class="rail-card rail-workflow" data-rail-panel="workflow">
                            <div class="rail-title">Workflow</div>
                            <ol class="workflow-list">
                                <li class="workflow-item" data-workflow-step="load">
                                    <span class="workflow-label">1. Load deck</span>
                                    <span class="workflow-meta" data-workflow-deck>Not loaded</span>
                                </li>
                                <li class="workflow-item" data-workflow-step="agenda">
                                    <span class="workflow-label">2. Review agenda</span>
                                    <span class="workflow-meta" data-workflow-agenda>0 sections</span>
                                </li>
                                <li class="workflow-item" data-workflow-step="media">
                                    <span class="workflow-label">3. Check media</span>
                                    <span class="workflow-meta" data-workflow-media>Images: 0 · Videos: 0</span>
                                </li>
                                <li class="workflow-item" data-workflow-step="notes">
                                    <span class="workflow-label">4. Confirm notes</span>
                                    <span class="workflow-meta" data-workflow-notes>Notes: 0</span>
                                </li>
                                <li class="workflow-item" data-workflow-step="live">
                                    <span class="workflow-label">5. Go live</span>
                                    <span class="workflow-meta" data-workflow-live>Timer ready</span>
                                </li>
                            </ol>
                            <div class="panel-subtitle">Quick actions</div>
                            <div class="workflow-actions">
                                <button class="rail-action" type="button" data-action="workflow-file-open">Open JSON…</button>
                                <button class="rail-action" type="button" data-action="workflow-file-select">Select deck</button>
                                <button class="rail-action" type="button" data-action="fullscreen-open">Projector view</button>
                            </div>
                            <p class="rail-text rail-text-muted">Packaged presenter stays aligned with this deck.</p>
                        </div>
                        <div class="rail-card rail-live" data-rail-live data-rail-panel="live">
                            <div class="rail-title">Live cues</div>
                            <div class="status-live-grid">
                                <span class="status-live-chip" data-live-elapsed>Elapsed: 00:00</span>
                                <span class="status-live-chip" data-live-slide>Slide: 00:00</span>
                                <span class="status-live-chip" data-live-target>Target: --</span>
                                <span class="status-live-chip" data-live-clock>Clock: --:--</span>
                                <span class="status-live-chip" data-live-pace>Pace: not set</span>
                                <span class="status-live-chip" data-live-audience>Audience: not set</span>
                                <span class="status-live-chip" data-live-focus hidden></span>
                                <span class="status-live-chip" data-live-plan hidden></span>
                                <span class="status-live-chip" data-live-success hidden></span>
                            </div>
                            <div class="live-controls">
                                <button class="live-toggle" type="button" data-live-toggle>Pause timer</button>
                                <span class="panel-text" data-live-toggle-status>Timer running</span>
                            </div>
                        </div>
                        <div class="rail-card rail-focus" data-rail-focus data-rail-panel="focus">
                            <div class="rail-title">Deck focus + plan</div>
                            <p class="rail-text" data-deck-goal>Goal: not set.</p>
                            <p class="rail-text" data-deck-focus>Focus: not set.</p>
                            <div class="panel-subtitle">Priorities</div>
                            <ul class="rail-list" data-deck-priorities></ul>
                            <div class="panel-subtitle">Success looks like</div>
                            <ul class="rail-list" data-deck-success></ul>
                        </div>
                    </aside>
                </div>
                <div class="stage-footer">
                    <button class="control-button ghost" type="button" data-action="fullscreen">Enter fullscreen</button>
                    <button class="control-button ghost" type="button" data-action="fullscreen-open">Projector view</button>
                    <button class="control-button ghost" type="button">Blackout</button>
                </div>
            </section>

            <section class="presenter-panel" data-presenter-panel hidden>
                <div class="presenter-header">
                    <div class="presenter-title" data-presenter-title>Presenter notes will appear here.</div>
                    <div class="presenter-clock" data-presenter-clock>Clock: --:--</div>
                </div>
                <div class="presenter-live">
                    <span class="presenter-elapsed" data-presenter-elapsed>Elapsed: 00:00</span>
                    <span class="presenter-pace" data-presenter-pace>Pace: not set</span>
                    <span class="presenter-audience" data-presenter-audience>Audience: not set</span>
                </div>
                <div class="presenter-body">
                    <div class="presenter-notes" data-presenter-notes>Markdown-rendered notes appear here.</div>
                    <div class="presenter-next">
                        <strong>Next slide</strong>
                        <p data-presenter-next>Loading...</p>
                    </div>
                </div>
                <div class="presenter-insights" data-presenter-insights>
                    <div class="presenter-insights-header">Field insights (real data)</div>
                    <div class="presenter-insights-grid">
                        <article class="insight-card">
                            <div class="insight-title">Precipitation time series</div>
                            <div class="insight-chart" data-presenter-chart="ndvi_timeseries"></div>
                        </article>
                        <article class="insight-card">
                            <div class="insight-title">Temperature time series</div>
                            <div class="insight-chart" data-presenter-chart="ndmi_timeseries"></div>
                        </article>
                        <article class="insight-card">
                            <div class="insight-title">Precip vs temp</div>
                            <div class="insight-chart" data-presenter-chart="ndvi_scatter"></div>
                        </article>
                        <article class="insight-card">
                            <div class="insight-title">Irrigated acres (bar)</div>
                            <div class="insight-chart" data-presenter-chart="ndvi_bar"></div>
                        </article>
                        <article class="insight-card">
                            <div class="insight-title">Irrigated acres share</div>
                            <div class="insight-chart" data-presenter-chart="site_pie"></div>
                        </article>
                        <article class="insight-card">
                            <div class="insight-title">Irrigation vs precip</div>
                            <div class="insight-chart" data-presenter-chart="site_radar"></div>
                        </article>
                        <article class="insight-card insight-card-wide">
                            <div class="insight-title">Precip sparklines (small multiples)</div>
                            <div class="sparkline-grid" data-presenter-chart="ndvi_sparklines"></div>
                        </article>
                    </div>
                    <div class="presenter-insights-status" data-presenter-chart-status>Loading CSV…</div>
                </div>
            </section>

        </main>

        <section class="status-bar">
            <div class="status-item">
                <strong>Segment</strong>
                Slide intro and basin overview
            </div>
            <div class="status-item">
                <strong>Next action</strong>
                Confirm data placeholders before export
            </div>
            <div class="status-item">
                <strong>Export</strong>
                Use the python-pptx script for PPTX output
            </div>
        </section>
    </div>

    <div class="floating-panels" id="floating-panels" aria-hidden="true"></div>

    <dialog class="help-dialog" id="help-dialog">
        <div class="help-title">Presenter help</div>
        <p class="help-text">
            This console is a local-only draft. Replace placeholder text with approved
            content. Use the agenda panel to keep your talking points on track.
        </p>
        <div class="help-subtitle">Local server steps</div>
        <ol class="help-list">
            <li>Open WSL and go to: /mnt/g/ClarkSoft/projects/master_irrigator</li>
            <li>Run: bash /mnt/g/ClarkSoft/projects/master_irrigator/scripts/start_hmi_dev.sh</li>
            <li>Open: http://localhost:52101/hmi/master_irrigator_presentation_hmi.html</li>
            <li>Projector view: http://localhost:52101/hmi/master_irrigator_projector_hmi.html</li>
            <li>Keep the WSL window open while you work.</li>
        </ol>
        <p class="help-text">
            Slides load from /api/slides. If the page shows placeholders, refresh after
            your local server is running.
        </p>
        <p class="help-text">
            Deck selector requires the API server (start_hmi_dev.sh). Static preview does
            not provide a deck list.
        </p>
        <div class="help-subtitle">Branding + credits</div>
        <p class="help-text">Design: ClarkSoft Agentic Development Teams.</p>
        <p class="help-text">Licensed owner: Quality Irrigation.</p>
        <p class="help-text">Program deck: Colorado Master Irrigator - Republican River Basin.</p>
        <p class="help-text">Program status: Benefactor only; not affiliated with ClarkSoft.</p>
        <p class="help-text">Sponsor + presenter: Quality Irrigation.</p>
        <p class="help-text">Ownership: ClarkSoft owns all IP and developed products from this workspace.</p>
        <p class="help-text">
            Purpose: Support high-quality presentations for rural grower communities in the Republican
            River Basin.
        </p>
        <button class="help-close" id="help-close" type="button">Close</button>
    </dialog>

    <script src="/assets/vendor/js/jquery-3.6.1.min.js"></script>
    <script src="/assets/vendor/js/featherlight-1.7.14.min.js"></script>
    <script src="/assets/vendor/js/marked.min.js"></script>
    <script src="/assets/vendor/js/echarts.min.js"></script>
    <script src="master_irrigator_presentation_hmi.js?v=2"></script>
</body>
</html>
